<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MySQL的SQL语句总结</title>
      <link href="//%5Bobject%20Object%5D/2023/04/12/MySQL%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%E6%80%BB%E7%BB%93/"/>
      <url>//%5Bobject%20Object%5D/2023/04/12/MySQL%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><hr><h2 id="MySQL客户端命令"><a href="#MySQL客户端命令" class="headerlink" title="MySQL客户端命令"></a>MySQL客户端命令</h2><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-u：指定用户</span><br><span class="line">-p：指定密码</span><br><span class="line">-S：指定socket</span><br><span class="line">-h：指定主机域</span><br><span class="line"></span><br><span class="line">-e：免交互执行SQL语句</span><br><span class="line">-P：指定端口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 连接到数据库后（命令）</span></span><br><span class="line">status || \s 查看数据库基本状态</span><br><span class="line"><span class="built_in">help</span> || \h || ? 查看客户端命令的帮助</span><br><span class="line">clear || \c 终止当前的命令</span><br><span class="line">ego || \G 格式化输出结果</span><br><span class="line">quit || <span class="built_in">exit</span> || \q 退出MySQL命令行</span><br><span class="line"><span class="built_in">source</span> || \. 导入数据</span><br><span class="line">system || \! 执行系统命令</span><br><span class="line"><span class="built_in">tee</span> || \T 记录日志</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Ctrl +c // MySQL5.6中会退出数据库，MySQL5.7中会终止当前的SQL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 修改MySQL命令提示符</span></span><br><span class="line">prompt=MySQL5.7[\d]&gt;</span><br></pre></td></tr></table></figure><h3 id="mysqladmin"><a href="#mysqladmin" class="headerlink" title="mysqladmin"></a>mysqladmin</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检测MySQL是否存活</span></span><br><span class="line">mysqladmin -uroot -p789 ping</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止数据库服务</span></span><br><span class="line">mysqladmin -uroot -p789 shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment"># 免交互建库</span></span><br><span class="line">mysqladmin -uroot -p789 create zls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 免交互删库</span></span><br><span class="line">mysqladmin -uroot -p789 drop zls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置或更改密码</span></span><br><span class="line">mysqladmin -uroot -p789 password <span class="string">&#x27;123&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 库外执行刷新日志（binlog）</span></span><br><span class="line"><span class="comment"># （binlog）（用来记录Mysql内部对数据库的改动（只记录对数据的修改操作），主要用于数据库的主从复制以及增量恢复。）</span></span><br><span class="line">mysqladmin -uroot -p123 flush-log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看MySQL的默认配置参数</span></span><br><span class="line">mysqladmin -uroot -p123 variables</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载缓存</span></span><br><span class="line">mysqladmin -uroot -p123 reload</span><br></pre></td></tr></table></figure><h3 id="mysqldump"><a href="#mysqldump" class="headerlink" title="mysqldump"></a>mysqldump</h3><ul><li>做备份、导出数据</li></ul><h2 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h2><h2 id="DDL："><a href="#DDL：" class="headerlink" title="DDL："></a>DDL：</h2><p><strong>数据定义语言</strong></p><p>库和表的定义：对库表的增删</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增</span></span><br><span class="line">create database</span><br><span class="line">create table</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删</span></span><br><span class="line">drop database</span><br><span class="line">drop table</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改</span></span><br><span class="line">alter database</span><br><span class="line">alter table</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查（DQL）</span></span><br></pre></td></tr></table></figure><h3 id="库定义语言"><a href="#库定义语言" class="headerlink" title="库定义语言"></a>库定义语言</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 建库语法</span></span><br><span class="line"></span><br><span class="line">Name: <span class="string">&#x27;CREATE DATABASE&#x27;</span></span><br><span class="line"></span><br><span class="line">Syntax:</span><br><span class="line">CREATE &#123;DATABASE | SCHEMA&#125; [IF NOT EXISTS] db_name</span><br><span class="line">[create_option] ...</span><br><span class="line"></span><br><span class="line">create_option: [DEFAULT] &#123;</span><br><span class="line">CHARACTER SET [=] charset_name</span><br><span class="line">| COLLATE [=] collation_name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="增（create）"><a href="#增（create）" class="headerlink" title="增（create）"></a>增（create）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##增（create）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 两种写法（针对库）</span></span><br><span class="line">create database</span><br><span class="line">create schema</span><br><span class="line"></span><br><span class="line"><span class="comment">## 创建数据库</span></span><br><span class="line">create database 库名;</span><br><span class="line">create schema 库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 判断数据库是否存在，如果存在则不报错，如果不存在则创建（if not exists）</span></span><br><span class="line">create database <span class="keyword">if</span> not exists zls1;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 创建数据库时，指定字符集（charset）</span></span><br><span class="line">mysql&gt; create database <span class="keyword">if</span> not exists test_db1 character <span class="built_in">set</span> = utf8;</span><br><span class="line">mysql&gt; create database <span class="keyword">if</span> not exists test_db2 charset utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 创建数据库是，指定校验规则（collate）</span></span><br><span class="line">mysql&gt; create database <span class="keyword">if</span> not exists test_db3 charset utf8 collate</span><br><span class="line">utf8_bin;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看mysql有哪些字符集</span></span><br><span class="line">show charset;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看mysql有哪些校验规则</span></span><br><span class="line">show collation;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数据库字符集</span></span><br><span class="line">show variables like <span class="string">&#x27;%character%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看库/表的字符集和校验规则（查看建库/表语句）</span></span><br><span class="line">show create database xxx;</span><br><span class="line">show create table xxx;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 修改配置文件指定字符集</span></span><br><span class="line">[mysqld]</span><br><span class="line">character_set_server=utf8</span><br></pre></td></tr></table></figure><h4 id="删（drop）"><a href="#删（drop）" class="headerlink" title="删（drop）"></a>删（drop）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删（drop）</span></span><br><span class="line">mysql&gt; drop database 库名;</span><br></pre></td></tr></table></figure><h4 id="改（alter）"><a href="#改（alter）" class="headerlink" title="改（alter）"></a>改（alter）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改（alter）</span></span><br><span class="line"><span class="comment">## 修改字符集，校验规则</span></span><br><span class="line">mysql&gt; alter database 库名 charset utf8 collate utf8_bin;</span><br></pre></td></tr></table></figure><h3 id="表定义语言"><a href="#表定义语言" class="headerlink" title="表定义语言"></a>表定义语言</h3><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 数字类型</span></span><br><span class="line">bigint 大整型 -2^63 ~ 2^63-1 </span><br><span class="line">（-9,223,372,036,854,775,808 - 9,223,372,036,854,775,807）</span><br><span class="line">int：整型 -2^31 ~ (2^31)-1 （-2147483648 - 2147483647）</span><br><span class="line">tinyint：最小整型 -128 ~ 127</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 字符串类型</span></span><br><span class="line">varchar：可变长的字符串</span><br><span class="line">char：定长字符串</span><br><span class="line"></span><br><span class="line">varchar(5)  <span class="comment"># 小于5位，是几位算几位，不能超过5位</span></span><br><span class="line">char(5)  <span class="comment"># 不能超过5位，5以内，都算是5位</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># varchar特点</span></span><br><span class="line">1、使用比固定长度类型(char)占用更少存储空间(除了使用ROW_FORMAT=FIXED创建的MyISAM表)。</span><br><span class="line">2、使用额外的1-2字节来存储值长度，列长度&lt;=255使用1字节保存，其它情况使用2字节保存。例如varchar(10)会占用11字节存储空间，varchar(500)会占用502字节存储空间。</span><br><span class="line">3、节约空间，所以性能会有帮助。在更新的时候会产生额外的工作。</span><br><span class="line">4、5.0以上版本，取值或设置值都会保存字符串末尾的空格，4.1之前的版本都会把字符串末尾的空格删除掉。</span><br><span class="line">5、最大长度远大于平均长度，很少发生更新的时候适合使用varchar，因为碎片更少了。</span><br><span class="line"><span class="comment"># char特点</span></span><br><span class="line">1、使用固定长度。</span><br><span class="line">2、保存的时候会去掉字符串末尾的空格。</span><br><span class="line">3、适合保存MD5后的哈希值或经常改变的值，因为固定的行不容易产生碎片。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 枚举类型</span></span><br><span class="line">enum(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 时间类型</span></span><br><span class="line">timestamp 1970-01-01 00:00:00 - 2038-01-19 03:14:07</span><br><span class="line">datetime 1000-01-01 00:00:00 - 9999-12-31 23:59:59</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 浮点型</span></span><br><span class="line"><span class="built_in">float</span> : 单精度浮点数</span><br><span class="line">double : 双精度浮点数</span><br><span class="line"></span><br><span class="line"><span class="comment"># 两者的主要区别如下：</span></span><br><span class="line">　　01.在内存中占有的字节数不同</span><br><span class="line">　　　　单精度浮点数在机内存占4个字节</span><br><span class="line">　　　　双精度浮点数在机内存占8个字节</span><br><span class="line">　　02.有效数字位数不同</span><br><span class="line">　　　　单精度浮点数有效数字8位</span><br><span class="line">　　　　双精度浮点数有效数字16位</span><br><span class="line">　　03.数值取值范围</span><br><span class="line">　　　　单精度浮点数的表示范围：-3.40E+38~3.40E+38</span><br><span class="line">　　　　双精度浮点数的表示范围：-1.79E+308~-1.79E+308</span><br><span class="line">　　04.在程序中处理速度不同</span><br><span class="line">　　　　一般来说，CPU处理单精度浮点数的速度比处理双精度浮点数快</span><br><span class="line">　　　　如果不声明，默认小数为double类型，所以如果要用<span class="built_in">float</span>的话，必须进行强转</span><br><span class="line"></span><br><span class="line"><span class="comment"># 例子</span></span><br><span class="line">　　例如：<span class="built_in">float</span>  a=1.3; 会编译报错，正确的写法 <span class="built_in">float</span> a = (<span class="built_in">float</span>)1.3;或者<span class="built_in">float</span> a = 1.3f;（f或F都可以不区分大小写）</span><br><span class="line">注意：<span class="built_in">float</span>是8位有效数字，第7位数字将会四舍五入</span><br><span class="line">面试题：</span><br><span class="line">　　1.java中3*0.1==0.3将会返回什么？<span class="literal">true</span>还是<span class="literal">false</span>？</span><br><span class="line">　　　fale,因为浮点数不能完全精确的表示出来，一般会损失精度。</span><br><span class="line">　　2.java中<span class="built_in">float</span> f = 3.4;是否正确？</span><br><span class="line">　　   不正确，3.4是双精度数，将双精度型（double）赋值给浮点型（<span class="built_in">float</span>）属于向下转型会造　　成精度损失，因此需要强制类型转换<span class="built_in">float</span> f = (<span class="built_in">float</span>)3.4;或者写成 <span class="built_in">float</span> f = 3.4f;才可以。</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(3*0.1);</span><br><span class="line">        System.out.println(3*0.1==0.3);</span><br><span class="line">　　　　//float是8位有效数字，第7位数字将会四舍五入</span><br><span class="line">        <span class="built_in">float</span> a =1.32344435f;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="字段属性"><a href="#字段属性" class="headerlink" title="字段属性"></a>字段属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 字段属性 ###############</span></span><br><span class="line">null：可以为空</span><br><span class="line">not null：非空</span><br><span class="line">primary key：主键索引 唯一 且 非空 （一张表中，只能设置一个主键）</span><br><span class="line">unique key：唯一键索引 唯一 可以为空 + not null</span><br><span class="line">auto_increment：自增</span><br><span class="line">unsigned：一般配合整型使用，非负数（无符号）</span><br><span class="line">default：设置默认值</span><br><span class="line">zerofill：使用0自动补全</span><br><span class="line"></span><br><span class="line"><span class="comment">## ---------最重要-----------------</span></span><br><span class="line">comment：注释、备注</span><br></pre></td></tr></table></figure><h4 id="建表语句（增）"><a href="#建表语句（增）" class="headerlink" title="建表语句（增）"></a>建表语句（增）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 建表语句</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 字段 数据类型 属性 comment</span></span><br><span class="line">create table student2(</span><br><span class="line"><span class="built_in">id</span> int primary key auto_increment comment <span class="string">&#x27;学生学号&#x27;</span>,</span><br><span class="line">name varchar(10) not null comment <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">age tinyint unsigned not null comment <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">gender enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>) not null default <span class="string">&#x27;m&#x27;</span> comment <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">phone char(11) not null unique key comment <span class="string">&#x27;联系方式&#x27;</span>,</span><br><span class="line">doa datetime not null default NOW() comment <span class="string">&#x27;入学时间&#x27;</span></span><br><span class="line">) charset utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">## （zerofill）自动补0</span></span><br><span class="line">create table student4(</span><br><span class="line"><span class="built_in">id</span> int(3) zerofill primary key auto_increment comment <span class="string">&#x27;学生学号&#x27;</span>,</span><br><span class="line">name varchar(10) not null comment <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">age tinyint unsigned not null comment <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">gender enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>) not null default <span class="string">&#x27;m&#x27;</span> comment <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">phone char(11) not null unique key comment <span class="string">&#x27;联系方式&#x27;</span>,</span><br><span class="line">doa datetime not null default NOW() comment <span class="string">&#x27;入学时间&#x27;</span></span><br><span class="line">) charset utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">## primary key(&#x27;id&#x27;,&#x27;phone&#x27;) 只能有一个，但可以包含多个</span></span><br><span class="line">create table student6(</span><br><span class="line"><span class="built_in">id</span> int(3) zerofill auto_increment comment <span class="string">&#x27;学生学号&#x27;</span>,</span><br><span class="line">name varchar(10) not null comment <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">age tinyint unsigned not null comment <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">gender enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>) not null default <span class="string">&#x27;m&#x27;</span> comment <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">phone char(11) comment <span class="string">&#x27;联系方式&#x27;</span>,</span><br><span class="line">doa datetime not null default NOW() comment <span class="string">&#x27;入学时间&#x27;</span>,</span><br><span class="line">primary key(<span class="built_in">id</span>,phone)</span><br><span class="line">) charset utf8;</span><br></pre></td></tr></table></figure><h4 id="删表"><a href="#删表" class="headerlink" title="删表"></a>删表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删表</span></span><br><span class="line">mysql&gt; drop table 库名.表名;</span><br></pre></td></tr></table></figure><h4 id="改表"><a href="#改表" class="headerlink" title="改表"></a>改表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改表（改表结构）</span></span><br><span class="line"><span class="comment">### 改表名（rename）</span></span><br><span class="line">mysql&gt; alter table student2 rename zls_student2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 改字段</span></span><br><span class="line"><span class="comment"># 增（add）</span></span><br><span class="line"><span class="comment">## 增加字段</span></span><br><span class="line">mysql&gt; alter table zls_student2 add heqingwen char(3) not null;</span><br><span class="line">mysql&gt; alter table zls_student2 add wzk char(3) not null;</span><br><span class="line"><span class="comment">## 将字段放在指定字段的后面</span></span><br><span class="line">mysql&gt; alter table zls_student2 add kangkang varchar(5) not null</span><br><span class="line">after doa;</span><br><span class="line"><span class="comment">## 将字段放在最前面</span></span><br><span class="line">mysql&gt; alter table zls_student2 add tangxu varchar(5) not null first;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删（drop）</span></span><br><span class="line">mysql&gt; alter table zls_student2 drop heqingwen;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改（change）（modify）</span></span><br><span class="line">change  <span class="comment">## 可以修改字段名、数据类型、属性（必须写名字）</span></span><br><span class="line">modify  <span class="comment">## 只能修改数据类型和属性</span></span><br><span class="line"><span class="comment">## 修改字段数据类型</span></span><br><span class="line">mysql&gt; alter table zls_student2 change kangkang kangkang varchar(10);</span><br><span class="line">mysql&gt; alter table zls_student2 modify kangkang char(10);</span><br><span class="line"><span class="comment">## 修改字段属性</span></span><br><span class="line">mysql&gt; alter table zls_student2 modify kangkang char(10) not null;</span><br><span class="line">mysql&gt; alter table zls_student2 change kangkang kangkang char(10) null default <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"><span class="comment">## 修改字段名字</span></span><br><span class="line">mysql&gt; alter table zls_student2 change kangkang syh varchar(1);</span><br></pre></td></tr></table></figure><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">DDL:数据定义语言</span><br><span class="line">针对库和表的定义 操作的都是元数据</span><br><span class="line"></span><br><span class="line"><span class="comment">## 库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增</span></span><br><span class="line">create database</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删</span></span><br><span class="line">drop database</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改</span></span><br><span class="line">alter database</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增</span></span><br><span class="line">create table</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删</span></span><br><span class="line">drop table</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改</span></span><br><span class="line">alter table</span><br></pre></td></tr></table></figure><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230404193308527.png" alt=" "></p><h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><p><strong>数据操作语言</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 数据操作语言</span></span><br><span class="line">针对表中的数据进行操作 操作的都是真实数据</span><br><span class="line"></span><br><span class="line"><span class="comment">## 插入数据之前，需要知道表的表结构（了解有哪些字段）</span></span><br><span class="line">mysql&gt; desc student3;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增 (insert)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删 (delete)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 改 (update)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查(select)（DQL）</span></span><br></pre></td></tr></table></figure><h3 id="增-insert"><a href="#增-insert" class="headerlink" title="增 (insert)"></a>增 (insert)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增 (insert)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一种写法</span></span><br><span class="line">mysql&gt; insert into 库.表(字段1,字段2,字段3,字段4...) values(<span class="string">&#x27;值1&#x27;</span>,<span class="string">&#x27;值2&#x27;</span>,值3,<span class="string">&#x27;值4&#x27;</span>...);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种写法</span></span><br><span class="line">mysql&gt; insert 库.表 values(<span class="string">&#x27;值1&#x27;</span>,<span class="string">&#x27;值2&#x27;</span>,值3,<span class="string">&#x27;值4&#x27;</span>...);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 例子</span></span><br><span class="line">mysql&gt; insert student3(<span class="built_in">id</span>,age,gender,name,phone,doa)</span><br><span class="line">values(3,80,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;abd&#x27;</span>,<span class="string">&#x27;12345678902&#x27;</span>,NOW());</span><br><span class="line"></span><br><span class="line">mysql&gt; insert student3 values(4,<span class="string">&#x27;abe&#x27;</span>,80,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;12345678903&#x27;</span>,NOW());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 插入多条数据</span></span><br><span class="line">mysql&gt; insert student3(age,gender,name,phone) values(32,<span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;abx&#x27;</span>,<span class="string">&#x27;12345678908&#x27;</span>),(31,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;abz&#x27;</span>,<span class="string">&#x27;12345678909&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="删-delete"><a href="#删-delete" class="headerlink" title="删 (delete)"></a>删 (delete)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删 (delete)</span></span><br><span class="line">mysql&gt; delete from 表名;</span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> 条件;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 规范删除方法</span></span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> <span class="built_in">id</span>=4;</span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> name=<span class="string">&#x27;abx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 多条件删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 同时满足执行</span></span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> name=<span class="string">&#x27;abz&#x27;</span> and doa=<span class="string">&#x27;2023-04-05 09:00:01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 满足一个就执行</span></span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> name=<span class="string">&#x27;abz&#x27;</span> or name=<span class="string">&#x27;abx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算</span></span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> <span class="built_in">id</span>=14-3;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 范围</span></span><br><span class="line">mysql&gt; delete from student3 <span class="built_in">where</span> <span class="built_in">id</span>&gt;=9 and <span class="built_in">id</span>&lt;14;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加多个</span></span><br><span class="line">delete from student3 <span class="built_in">where</span> <span class="built_in">id</span>=14 or <span class="built_in">id</span>=21 or <span class="built_in">id</span>=18;</span><br><span class="line">delete from student3 <span class="built_in">where</span> name <span class="keyword">in</span> (<span class="string">&#x27;abz&#x27;</span>,<span class="string">&#x27;abe&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="改-update"><a href="#改-update" class="headerlink" title="改 (update)"></a>改 (update)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改 (update)</span></span><br><span class="line">mysql&gt; update 库.表 <span class="built_in">set</span> 被修改的字段=被修改的值 <span class="built_in">where</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 注意：只有在修改mysql.user表中的用户信息时</span></span><br><span class="line"><span class="comment">## 才需要执行 flush privileges;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断</span></span><br><span class="line">mysql&gt; update student3 <span class="built_in">set</span> name=<span class="string">&#x27;zls&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=17;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 改所有可以直接给一个永远成立的判断</span></span><br><span class="line">mysql&gt; update student3 <span class="built_in">set</span> name=<span class="string">&#x27;tls&#x27;</span> <span class="built_in">where</span> 1=1;</span><br></pre></td></tr></table></figure><h3 id="update代替delete做伪删除"><a href="#update代替delete做伪删除" class="headerlink" title="update代替delete做伪删除"></a>update代替delete做伪删除</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 设置一个字段，status,更改它的值，做到不删除数据只改变状态（伪删除）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.给表中添加状态列（添加一个字段）</span></span><br><span class="line">mysql&gt; alter table student3 add status enum(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>) not null default <span class="string">&#x27;1&#x27;</span> comment <span class="string">&#x27;物品状态&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.使用update删除数据（变更状态信息）</span></span><br><span class="line">mysql&gt; update student3 <span class="built_in">set</span> status=<span class="string">&#x27;0&#x27;</span> <span class="built_in">where</span> <span class="built_in">id</span>=31;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.查询数据时，接状态条件进行查询</span></span><br><span class="line">mysql&gt; select * from student3 <span class="built_in">where</span> status=<span class="string">&#x27;1&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 数据控制语言 针对用户权限的控制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 授权 (grant)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 回收权限 (revoke)</span></span><br></pre></td></tr></table></figure><h3 id="授权-grant"><a href="#授权-grant" class="headerlink" title="授权 (grant)"></a>授权 (grant)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 授权 (grant)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通管理员</span></span><br><span class="line">mysql&gt; grant all on *.* to wp@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"><span class="comment">## 真的超级管理员（with grant option）</span></span><br><span class="line">mysql&gt; grant all on *.* to wp@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span> with grant option;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 安全限制</span></span><br><span class="line"><span class="comment"># (登录mysql 需要查询一次)</span></span><br><span class="line"><span class="comment"># (更新mysql 需要查询一次)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># max_queries_per_hour：一个用户每小时可发出的查询数量</span></span><br><span class="line">mysql&gt; grant all on *.* to test_grant2@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123@qqdianCOM&#x27;</span> with max_queries_per_hour 1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># max_updates_per_hour：一个用户每小时可发出的更新数量</span></span><br><span class="line">grant all on *.* to test_grant3@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123@qqdianCOM&#x27;</span> max_updates_per_hour 1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># max_connections_per_hour：一个用户每小时可连接到服务器的次数</span></span><br><span class="line">grant all on *.* to test_grant5@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123@qqdianCOM&#x27;</span> max_connections_per_hour 1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># max_user_connections：允许同时连接数量</span></span><br><span class="line">grant all on *.* to test_grant6@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123@qqdianCOM&#x27;</span> with max_user_connections 2;</span><br></pre></td></tr></table></figure><h3 id="回收权限-revoke"><a href="#回收权限-revoke" class="headerlink" title="回收权限 (revoke)"></a>回收权限 (revoke)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 回收权限 (revoke)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 回收wp@&#x27;%&#x27;用户select权限</span></span><br><span class="line">mysql&gt; revoke select on *.* from wp@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">SELECT,INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, SHUTDOWN,PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER,CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE,REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTERROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个select,insert,update,delete权限的用户</span></span><br><span class="line">grant select,insert,update,delete on *.* to dev@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回收用户dev@&#x27;%&#x27;的delete权限</span></span><br><span class="line">revoke delete on *.* from dev@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><h3 id="库-show"><a href="#库-show" class="headerlink" title="库-show"></a>库-show</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 针对库的DQL##############</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有数据库</span></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数据库的属性</span></span><br><span class="line">mysql&gt; show create database test_db;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前所在数据库</span></span><br><span class="line">mysql&gt; select database();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 针对表的DQL###############</span></span><br><span class="line"><span class="comment"># 查看当前库中的所有表 ls -l</span></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定库中的所有表 ls -l /opt</span></span><br><span class="line">mysql&gt; show tables from test_db;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看表结构</span></span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">mysql&gt; desc test_db.student;</span><br><span class="line"></span><br><span class="line">+--------+---------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+---------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span> | int(11) | YES | | NULL | |</span><br><span class="line">| name | varchar(10) | YES | | NULL | |</span><br><span class="line">| age | tinyint(4) | YES | | NULL | |</span><br><span class="line">| gender | enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>) | YES | | NULL | |</span><br><span class="line">| phone | char(11) | YES | | NULL | |</span><br><span class="line">| doa | datetime | YES | | NULL | |</span><br><span class="line">+--------+---------------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建表语句</span></span><br><span class="line">mysql&gt; show create table student;`</span><br><span class="line"></span><br><span class="line">student | CREATE TABLE `student` (</span><br><span class="line">`<span class="built_in">id</span>` int(11) DEFAULT NULL,</span><br><span class="line">`name` varchar(10) DEFAULT NULL,</span><br><span class="line">`age` tinyint(4) DEFAULT NULL,</span><br><span class="line">`gender` enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>) DEFAULT NULL,</span><br><span class="line">`phone` char(11) DEFAULT NULL,</span><br><span class="line">`doa` datetime DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1</span><br></pre></td></tr></table></figure><h3 id="基础查询-select"><a href="#基础查询-select" class="headerlink" title="基础查询 (select)"></a>基础查询 (select)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 危险(查看表里所有内容&#x27;*&#x27;,表比较大的情况会出现问题)</span></span><br><span class="line">mysql&gt; select * from test_db.student3;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show tables from world;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_world |</span><br><span class="line">+-----------------+</span><br><span class="line">| city | <span class="comment"># 城市表</span></span><br><span class="line">| country | <span class="comment"># 国家表</span></span><br><span class="line">| countrylanguage | <span class="comment"># 国家语言表</span></span><br><span class="line">+-----------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; desc world.city;</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| ID | int(11) | NO | PRI | NULL | auto_increment |</span><br><span class="line"><span class="comment"># 序号</span></span><br><span class="line">| Name | char(35) | NO | | | |</span><br><span class="line"><span class="comment"># 城市名</span></span><br><span class="line">| CountryCode | char(3) | NO | MUL | | |</span><br><span class="line"><span class="comment"># 国家代码</span></span><br><span class="line">| District | char(20) | NO | | | |</span><br><span class="line"><span class="comment"># 省</span></span><br><span class="line">| Population | int(11) | NO | | 0 | |</span><br><span class="line"><span class="comment"># 人口数量</span></span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 查询所有数据</span></span><br><span class="line">mysql&gt; select * from world.city;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 单条件查询</span></span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 多条件查询</span></span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> or countrycode=<span class="string">&#x27;USA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 题 (where判断)</span></span><br><span class="line"><span class="comment">##1. 国家代码是CHN的并且省市heillongjiang的城市名有哪些？</span></span><br><span class="line">mysql&gt; select name from world.city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> and district=<span class="string">&#x27;heilongjiang&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 范围查询 (&lt; 、&gt; 、&lt;= 、&gt;= 、 &lt;&gt; 、!=)</span></span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> <span class="built_in">id</span> &gt; 10 and <span class="built_in">id</span> &lt; 30;</span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> population &lt; 1000;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 模糊查询 (like)</span></span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> countrycode like <span class="string">&#x27;%B%&#x27;</span>;</span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> countrycode like <span class="string">&#x27;%B&#x27;</span>;</span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">where</span> countrycode like <span class="string">&#x27;B%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 分页查询 (limit)</span></span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">limit</span> 0,65;</span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">limit</span> 65,65;</span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">limit</span> 130,65;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 统计一张表有多少条数据 （count(*)统计）</span></span><br><span class="line">mysql&gt; select count(*) from world.city;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 排序查询 (order by)</span></span><br><span class="line"><span class="comment"># 顺序（order by 字段）</span></span><br><span class="line">mysql&gt; select * from world.city order by population;</span><br><span class="line"><span class="comment"># 倒序（order by 字段 desc）</span></span><br><span class="line">mysql&gt; select * from world.city order by population desc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 别名(as)</span></span><br><span class="line">mysql&gt; select <span class="built_in">id</span> as <span class="string">&#x27;序号&#x27;</span>,name as <span class="string">&#x27;城市名&#x27;</span>,countrycode as <span class="string">&#x27;国家代码&#x27;</span>,district as <span class="string">&#x27;省&#x27;</span>,population as <span class="string">&#x27;人口数量&#x27;</span> from world.city order by population desc <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 分组查询 (group by)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用过的函数</span></span><br><span class="line">password()</span><br><span class="line">now()</span><br><span class="line">database()</span><br><span class="line"></span><br><span class="line"><span class="comment"># MySQL中常用的聚合函数</span></span><br><span class="line">max() <span class="comment"># 求最大值函数</span></span><br><span class="line">min() <span class="comment"># 求最小值函数</span></span><br><span class="line">avg() <span class="comment"># 求平均值函数</span></span><br><span class="line"><span class="built_in">sum</span>() <span class="comment"># 求和函数</span></span><br><span class="line">count() <span class="comment"># 统计函数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 查询4点</span></span><br><span class="line">1.遇到统计想函数</span><br><span class="line">2.形容词前group by</span><br><span class="line">3.函数中央是名词</span><br><span class="line">4.列名select后添加</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 题</span></span><br><span class="line"><span class="comment">#1. 统计世界上每个国家的总人口数</span></span><br><span class="line">1.<span class="built_in">sum</span>()</span><br><span class="line">2.group by contrycode</span><br><span class="line">3.<span class="built_in">sum</span>(population)</span><br><span class="line">4.select 国家代码 总人口数量</span><br><span class="line"></span><br><span class="line">select countrycode,<span class="built_in">sum</span>(population) from world.city group by countrycode order by <span class="built_in">sum</span>(population);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. 统计中国各个省的人口数量(练习)</span></span><br><span class="line">1.<span class="built_in">sum</span>()</span><br><span class="line">2.group by district</span><br><span class="line">3.<span class="built_in">sum</span>(population)</span><br><span class="line">4.select 国家代码 省 总人口数量</span><br><span class="line"></span><br><span class="line">select countrycode,district,<span class="built_in">sum</span>(population) from world.city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> group by district;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#3. 统每个国家的城市数量(练习)</span></span><br><span class="line">1.count()</span><br><span class="line">2.group by countrycode</span><br><span class="line">3.count(name)</span><br><span class="line">4.select 国家代码 城市数量</span><br><span class="line"></span><br><span class="line">select countrycode,count(name) from world.city group by countrycode;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4. 统计中国每个省的城市数量（练习）</span></span><br><span class="line">1.count()</span><br><span class="line">2.group by district</span><br><span class="line">3.count(name)</span><br><span class="line">4.select 国家代码 省 城市数量</span><br><span class="line"></span><br><span class="line">select countrycode,district,count(name) from world.city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> group by district order by count(name);</span><br></pre></td></tr></table></figure><h2 id="Select-高级用法（连表查询）"><a href="#Select-高级用法（连表查询）" class="headerlink" title="Select 高级用法（连表查询）"></a>Select 高级用法（连表查询）</h2><h3 id="连表查询分类"><a href="#连表查询分类" class="headerlink" title="连表查询分类"></a>连表查询分类</h3><ul><li>传统连接 </li><li>自连接 </li><li>内连接 </li><li>外连接<ul><li>左外连接 </li><li>右外连接</li></ul></li></ul><h3 id="连表查询-传统连接"><a href="#连表查询-传统连接" class="headerlink" title="连表查询-传统连接"></a>连表查询-传统连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 找等价条件 + 需求条件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (select 需要查的列 from 需要查询到的表 where 等价条件 and 需求条件)</span></span><br><span class="line">mysql&gt; select stu_name.name,stu_score.mark from stu_name,stu_score</span><br><span class="line"><span class="built_in">where</span> stu_name.id=stu_score.id and name=<span class="string">&#x27;zhang3&#x27;</span>;</span><br><span class="line">+--------+------+</span><br><span class="line">| name | mark |</span><br><span class="line">+--------+------+</span><br><span class="line">| zhang3 | 80 |</span><br><span class="line">+--------+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 世界上小于100人的人口城市是哪个国家的？</span></span><br><span class="line">国家名  城市名 人口数量</span><br><span class="line">country.name city.name city.population</span><br><span class="line"></span><br><span class="line">select country.name,city.name,city.population</span><br><span class="line">from city,country</span><br><span class="line"><span class="built_in">where</span> city.countrycode=country.code</span><br><span class="line">and city.population&lt;100;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 别名 (as)</span></span><br><span class="line">select country.name as <span class="string">&#x27;国家名&#x27;</span>,city.name as <span class="string">&#x27;城市名&#x27;</span>,city.population as <span class="string">&#x27;城市人口&#x27;</span></span><br><span class="line">from city,country</span><br><span class="line"><span class="built_in">where</span> city.countrycode=country.code</span><br><span class="line">and city.population&lt;100;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 三表连查</span></span><br><span class="line"><span class="comment"># 世界上小于100人的人口城市是哪个国家的他们说的语言是什么？</span></span><br><span class="line"><span class="comment"># (select 需要查的列 from 需要查询到的表 where 等价条件 and 等价条件 and 需求条件)</span></span><br><span class="line"><span class="comment">#(a=b b=c 得a=c)</span></span><br><span class="line">国家名 城市名 人口数量 语言</span><br><span class="line">country.name city.name city.populationcountrylanguage.language</span><br><span class="line"></span><br><span class="line">mysql&gt; select</span><br><span class="line">country.name,city.name,city.population,countrylanguage.language</span><br><span class="line">-&gt; from city,country,countrylanguage</span><br><span class="line">-&gt; <span class="built_in">where</span> city.countrycode=country.code</span><br><span class="line">-&gt; and countrylanguage.countrycode=country.code</span><br><span class="line">-&gt; and city.population&lt;100;</span><br><span class="line">+----------+-----------+------------+-------------+</span><br><span class="line">| name | name | population | language |</span><br><span class="line">+----------+-----------+------------+-------------+</span><br><span class="line">| Pitcairn | Adamstown | 42 | Pitcairnese |</span><br><span class="line">+----------+-----------+------------+-------------+</span><br></pre></td></tr></table></figure><h3 id="连表查询-自连接"><a href="#连表查询-自连接" class="headerlink" title="连表查询-自连接"></a>连表查询-自连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自动连接：自动找到包含等价条件的列</span></span><br><span class="line"><span class="comment"># 大前提条件：多张表中，等价条件的列名，必须一致 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (natural join)</span></span><br><span class="line"><span class="comment"># (select 需要查的列 from 表1 natural join 表2 where 需求条件)</span></span><br><span class="line">mysql&gt; select stu_name.name,stu_score.mark</span><br><span class="line">-&gt; from stu_name natural <span class="built_in">join</span> stu_score</span><br><span class="line">-&gt; <span class="built_in">where</span> name=<span class="string">&#x27;li4&#x27;</span>;</span><br><span class="line">+------+------+</span><br><span class="line">| name | mark |</span><br><span class="line">+------+------+</span><br><span class="line">| li4 | 50 |</span><br><span class="line">+------+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 世界上小于100人的人口城市是哪个国家的他们说的语言是什么？</span></span><br><span class="line"><span class="comment"># (select 需要查的列 from 表1 natural join 表2 where 需求条件)</span></span><br><span class="line">city.countrycode city.name city.populationcountrylanguage.language</span><br><span class="line"></span><br><span class="line">select</span><br><span class="line">city.countrycode,city.name,city.population,countrylanguage.language</span><br><span class="line">from city natural <span class="built_in">join</span> countrylanguage</span><br><span class="line"><span class="built_in">where</span> city.population&lt;100;</span><br><span class="line">+-------------+-----------+------------+-------------+</span><br><span class="line">| countrycode | name | population | language |</span><br><span class="line">+-------------+-----------+------------+-------------+</span><br><span class="line">| PCN | Adamstown | 42 | Pitcairnese |</span><br><span class="line">+-------------+-----------+------------+-------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 三表自连接</span></span><br><span class="line"><span class="comment"># (select 需要查的列 from 表1 natural join 表2 natural join 表3 where 需求条件)</span></span><br><span class="line">mysql&gt; select stu_name.name,stu_score.mark,stu_age.age</span><br><span class="line">from stu_name natural <span class="built_in">join</span> stu_score natural <span class="built_in">join</span> stu_age</span><br><span class="line"><span class="built_in">where</span> name=<span class="string">&#x27;wang5&#x27;</span>;</span><br><span class="line">+-------+------+------+</span><br><span class="line">| name | mark | age |</span><br><span class="line">+-------+------+------+</span><br><span class="line">| wang5 | 70 | 40 |</span><br><span class="line">+-------+------+------+</span><br></pre></td></tr></table></figure><h3 id="连表查询-内连接"><a href="#连表查询-内连接" class="headerlink" title="连表查询-内连接"></a>连表查询-内连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## (join on)</span></span><br><span class="line"><span class="comment">## (注意 小表在前 join 大表在后)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A表 join B表 on 等价条件（双表）</span></span><br><span class="line"><span class="comment"># A表 join B表 join C表 on 等价条件1 and 等价条件2 (不符合SQL语句)</span></span><br><span class="line"><span class="comment"># A表 join B表 on 等价条件1 join C表 on 等价条件2 SQL-92标准（三表）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 世界上小于100人的人口城市是哪个国家的？</span></span><br><span class="line">国家名 城市名 人口数量</span><br><span class="line">country.name city.name city.population</span><br><span class="line"><span class="comment"># (select 需要查的列 from 表1 join 表2 on 等价条件 where 需求条件)</span></span><br><span class="line">select country.name,city.name,city.population</span><br><span class="line">from city <span class="built_in">join</span> country</span><br><span class="line">on city.countrycode=country.code</span><br><span class="line"><span class="built_in">where</span> city.population&lt;100;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 世界上小于100人的人口城市是哪个国家的他们说的语言是什么？</span></span><br><span class="line"><span class="comment"># (select 需要查的列 from 表1 join 表2 on 等价条件 join 表3 on 等价条件 where 需求条件)</span></span><br><span class="line">select</span><br><span class="line">country.name,city.name,city.population,countrylanguage.language</span><br><span class="line">from city <span class="built_in">join</span> country</span><br><span class="line">on city.countrycode=country.code</span><br><span class="line"><span class="built_in">join</span> countrylanguage</span><br><span class="line">on countrylanguage.countrycode=country.code</span><br><span class="line"><span class="built_in">where</span> city.population&lt;100;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 处理文件：</span></span><br><span class="line"><span class="comment"># tail</span></span><br><span class="line"><span class="comment"># (order by id desc limit 10)</span></span><br><span class="line">mysql&gt; select * from world.city order by <span class="built_in">id</span> desc <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># head</span></span><br><span class="line"><span class="comment"># (limit 10)</span></span><br><span class="line">mysql&gt; select * from world.city <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># sort</span></span><br><span class="line"><span class="comment"># (order by)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># awk</span></span><br><span class="line"><span class="comment"># (select name,population)</span></span><br><span class="line">mysql&gt; select name,population from world.city <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># grep</span></span><br><span class="line"><span class="comment"># (like &#x27;%xxx%&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 注意：小表在前大表在后 ##########</span></span><br><span class="line"><span class="comment">## 全称 (inter join on)</span></span><br></pre></td></tr></table></figure><h3 id="连表查询-外连接"><a href="#连表查询-外连接" class="headerlink" title="连表查询-外连接"></a>连表查询-外连接</h3><p><strong>左外连接</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## (left join)</span></span><br><span class="line"><span class="comment"># city left join country 谁在左边显示谁，左边隐藏</span></span><br><span class="line"></span><br><span class="line">select city.name,city.countrycode,country.name</span><br><span class="line">from city left <span class="built_in">join</span> country</span><br><span class="line">on city.countrycode=country.code</span><br><span class="line">and city.population&lt;100 <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 全称 (outer join)(left outer join)</span></span><br></pre></td></tr></table></figure><p><strong>右外连接</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># right join</span></span><br><span class="line"><span class="comment"># city right join country 谁在右边显示谁，左边隐藏</span></span><br><span class="line"></span><br><span class="line">select city.name,city.countrycode,country.name</span><br><span class="line">from city right <span class="built_in">join</span> country</span><br><span class="line">on city.countrycode=country.code</span><br><span class="line">and city.population&lt;100 <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 全称 (right outer join on)</span></span><br></pre></td></tr></table></figure><h2 id="合并查询"><a href="#合并查询" class="headerlink" title="合并查询"></a>合并查询</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提升效率的高级用法</span></span><br><span class="line">mysql&gt; explain select * from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> or countrycode=<span class="string">&#x27;USA&#x27;</span>;</span><br><span class="line">+----+-------------+-------+------------+-------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | partitions | <span class="built_in">type</span> |</span><br><span class="line">+----+-------------+-------+------------+-------+</span><br><span class="line">| 1 | SIMPLE | city | NULL | range |</span><br><span class="line">+----+-------------+-------+------------+-------+</span><br><span class="line"></span><br><span class="line">mysql&gt; explain select * from city <span class="built_in">where</span> countrycode <span class="keyword">in</span> (<span class="string">&#x27;CHN&#x27;</span>,<span class="string">&#x27;USA&#x27;</span>);</span><br><span class="line">+----+-------------+-------+------------+-------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | partitions | <span class="built_in">type</span> |</span><br><span class="line">+----+-------------+-------+------------+-------+</span><br><span class="line">| 1 | SIMPLE | city | NULL | range |</span><br><span class="line">+----+-------------+-------+------------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 联合查询，效率高于上面两种（union all）=（&amp;&amp;）</span></span><br><span class="line">mysql&gt; select * from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> union all select * from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;USA&#x27;</span>;</span><br><span class="line">mysql&gt; explain select * from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span> union all select * from city <span class="built_in">where</span> countrycode=<span class="string">&#x27;USA&#x27;</span>;</span><br><span class="line">+----+-------------+-------+------------+------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | partitions | <span class="built_in">type</span> |</span><br><span class="line">+----+-------------+-------+------------+------+</span><br><span class="line">| 1 | PRIMARY | city | NULL | ref |</span><br><span class="line">| 2 | UNION | city | NULL | ref |</span><br><span class="line">+----+-------------+-------+------------+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 效率最低，全表扫描</span></span><br><span class="line">mysql&gt; explain select * from city;</span><br><span class="line">+----+-------------+-------+------------+------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | partitions | <span class="built_in">type</span> |</span><br><span class="line">+----+-------------+-------+------------+------+</span><br><span class="line">| 1 | SIMPLE | city | NULL | ALL |</span><br><span class="line">+----+-------------+-------+------------+------+</span><br></pre></td></tr></table></figure><h2 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h2><ul><li>Linux<ul><li>utf-8：一个中文占3个字节</li><li>utf8mb4：一个中文占4个字节</li></ul></li><li>Windows：GBK（国际扩）GB2312</li><li>万国编码：unicode</li></ul><h2 id="校验规则"><a href="#校验规则" class="headerlink" title="校验规则"></a>校验规则</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看MySQL中所有的校验规则</span></span><br><span class="line">mysql&gt; show collation;</span><br><span class="line"></span><br><span class="line">1）ci：大小写不敏感</span><br><span class="line">2）cs或bin：大小写敏感</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看MySQL中所有的字符集</span></span><br><span class="line">mysql&gt; show charset;</span><br></pre></td></tr></table></figure><h2 id="统一字符集"><a href="#统一字符集" class="headerlink" title="统一字符集"></a>统一字符集</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.操作系统</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## CentOS6</span></span><br><span class="line">root@db01,172.16.1.51:~ <span class="comment"># vim /etc/sysconfig/i18n </span></span><br><span class="line">LANG=<span class="string">&quot;en_US.UTF-8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## CentOS7</span></span><br><span class="line">root@db01,172.16.1.51:~ <span class="comment"># vim /etc/locale.conf</span></span><br><span class="line">LANG=<span class="string">&quot;en_US.UTF-8&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.远程连接工具</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.数据库</span></span><br><span class="line">create database 库名 charset utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.表</span></span><br><span class="line">create table 表名(<span class="built_in">id</span> int) charset utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改配置文件</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">character_set_server=utf8</span><br></pre></td></tr></table></figure><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230406154118733.png" alt="image-20230406154118733"></p><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">use linux50</span><br><span class="line"></span><br><span class="line"><span class="comment">## student</span></span><br><span class="line"></span><br><span class="line">create table student(</span><br><span class="line">sno int(20) primary key auto_increment comment <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">sname varchar(10) not null comment <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">sage tinyint unsigned not null comment <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">ssex enum(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>) not null default <span class="string">&#x27;1&#x27;</span> comment <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">sbirthday datetime default null comment <span class="string">&#x27;学生生日&#x27;</span>,</span><br><span class="line">class varchar(3) not null comment <span class="string">&#x27;学生班级&#x27;</span></span><br><span class="line">)charset utf8;</span><br><span class="line"></span><br><span class="line">insert into student(sname,sage,sbirthday,class) values(<span class="string">&#x27;徐导&#x27;</span>,<span class="string">&#x27;20&#x27;</span>,<span class="string">&#x27;2018-11-27 22:13:03&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">insert into student(sname,sage,sbirthday,class) values(<span class="string">&#x27;曾导&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;2018-11-27 22:13:03&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">insert into student(sname,sage,sbirthday,class) values(<span class="string">&#x27;李导&#x27;</span>,<span class="string">&#x27;25&#x27;</span>,<span class="string">&#x27;2018-11-27 22:13:03&#x27;</span>,<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## course</span></span><br><span class="line">create table course(</span><br><span class="line">cno int(20) primary key auto_increment comment <span class="string">&#x27;课程号&#x27;</span>,</span><br><span class="line">cname varchar(20) not null comment <span class="string">&#x27;课程名称&#x27;</span>,</span><br><span class="line">tno varchar(3) comment <span class="string">&#x27;教师编号&#x27;</span></span><br><span class="line">)charset utf8;</span><br><span class="line"></span><br><span class="line">insert into course(cname,tno) values(<span class="string">&#x27;英语&#x27;</span>,<span class="string">&#x27;001&#x27;</span>);</span><br><span class="line">insert into course(cname,tno) values(<span class="string">&#x27;语文&#x27;</span>,<span class="string">&#x27;002&#x27;</span>);</span><br><span class="line">insert into course(cname,tno) values(<span class="string">&#x27;数学&#x27;</span>,<span class="string">&#x27;003&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## score</span></span><br><span class="line">create table score(</span><br><span class="line">sno int(20) not null comment <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">cno varchar(20) not null comment <span class="string">&#x27;课程号&#x27;</span>,</span><br><span class="line">mark <span class="built_in">float</span>(4,1) not null comment <span class="string">&#x27;成绩&#x27;</span>,</span><br><span class="line">primary key(sno,cno)</span><br><span class="line">)charset utf8;</span><br><span class="line"></span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;90.0&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;10.0&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;60.0&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;90.0&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;99.5&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;80.0&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;80.5&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;60.0&#x27;</span>);</span><br><span class="line">insert into score(sno,cno,mark) values(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;88.0&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## teacher</span></span><br><span class="line">create table teacher(</span><br><span class="line">tno int(3) zerofill primary key auto_increment comment <span class="string">&#x27;教师编号&#x27;</span>,</span><br><span class="line">tname varchar(10) not null comment <span class="string">&#x27;教师姓名&#x27;</span>,</span><br><span class="line">tage tinyint unsigned not null comment <span class="string">&#x27;教师年龄&#x27;</span>,</span><br><span class="line">tsex enum(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>) not null default <span class="string">&#x27;1&#x27;</span> comment <span class="string">&#x27;教师性别&#x27;</span>,</span><br><span class="line">prof varchar(10) null comment <span class="string">&#x27;教师职称&#x27;</span>,</span><br><span class="line">depart varchar(10) not null comment <span class="string">&#x27;教师部门&#x27;</span></span><br><span class="line">)charset utf8;</span><br><span class="line"></span><br><span class="line">insert into teacher(tname,tage,prof,depart) values(<span class="string">&#x27;徐亮伟&#x27;</span>,<span class="string">&#x27;50&#x27;</span>,<span class="string">&#x27;教师总监&#x27;</span>,<span class="string">&#x27;语言系&#x27;</span>);</span><br><span class="line">insert into teacher(tname,tage,prof,depart) values(<span class="string">&#x27;曾志高翔&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;讲师&#x27;</span>,<span class="string">&#x27;文学系&#x27;</span>);</span><br><span class="line">insert into teacher(tname,tage,prof,depart) values(<span class="string">&#x27;李永宜&#x27;</span>,<span class="string">&#x27;80&#x27;</span>,<span class="string">&#x27;助教&#x27;</span>,<span class="string">&#x27;科学系&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230404180543400.png" alt="image-20230404180543400"> </p><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230404201536647.png" alt="image-20230404201536647"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.将自己班级小组所有人员信息插入到student表中（数据自定义）</span></span><br><span class="line">insert linux50.student(sname,sage,sbirthday,class) </span><br><span class="line">values(<span class="string">&#x27;坤坤&#x27;</span>,20,<span class="string">&#x27;2018-11-23 21:13:03&#x27;</span>,<span class="string">&#x27;4&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;文文&#x27;</span>,21,<span class="string">&#x27;2018-05-17 21:13:03&#x27;</span>,<span class="string">&#x27;4&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;航航&#x27;</span>,22,<span class="string">&#x27;2018-03-22 14:13:03&#x27;</span>,<span class="string">&#x27;4&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;猛猛&#x27;</span>,20,<span class="string">&#x27;2018-05-21 16:14:03&#x27;</span>,<span class="string">&#x27;4&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.将曾导、徐导、李导信息插入教师表中（数据自定义）</span></span><br><span class="line">insert linux50.teacher(tname,tage,prof,depart)</span><br><span class="line">values(<span class="string">&#x27;徐亮伟&#x27;</span>,<span class="string">&#x27;50&#x27;</span>,<span class="string">&#x27;教师总监&#x27;</span>,<span class="string">&#x27;语言系&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;曾志高翔&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;讲师&#x27;</span>,<span class="string">&#x27;文学系&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;李永宜&#x27;</span>,<span class="string">&#x27;80&#x27;</span>,<span class="string">&#x27;助教&#x27;</span>,<span class="string">&#x27;科学系&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.将数学、语文、英语学科插入到课程表中（数据自定义）</span></span><br><span class="line">insert linux50.course(cname,tno)</span><br><span class="line">values(<span class="string">&#x27;英语&#x27;</span>,<span class="string">&#x27;001&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;语文&#x27;</span>,<span class="string">&#x27;002&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;数学&#x27;</span>,<span class="string">&#x27;003&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.将分数插入到成绩表中（数据自定义）</span></span><br><span class="line">insert linux50.score(sno,cno,mark) values(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;90.0&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;10.0&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;60.0&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;90.0&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;99.5&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;80.0&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;80.5&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;60.0&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;88.0&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 查询练习：</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.查询student表中的所有记录的sname、ssex和class列。</span></span><br><span class="line">select sname,ssex,class from linux50.student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.查询教师所有的单位即不重复的depart列。</span></span><br><span class="line">select depart from linux50.teacher group by depart;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.查询student表的所有记录。</span></span><br><span class="line">select * from linux50.student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.查询score表中成绩在60到80之间的所有记录。</span></span><br><span class="line">select * from linux50.score <span class="built_in">where</span> mark&gt;=60 and mark &lt;=80;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.查询score表中成绩为85，86或88的记录。</span></span><br><span class="line">select mark from linux50.score <span class="built_in">where</span> mark=85 or mark=86 or mark=88; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.查询student表中1班或性别为“女”的同学记录。</span></span><br><span class="line">select sname,ssex,class from linux50.student <span class="built_in">where</span> class=1 or ssex=0; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.以class降序查询Student表的所有记录。</span></span><br><span class="line">select * from linux50.student order by class desc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.以cno升序、mark降序查询Score表的所有记录</span></span><br><span class="line">select * from score arsc order by cno,mark desc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.查询2班的学生人数。</span></span><br><span class="line">select class,count(class) from linux50.student <span class="built_in">where</span> class=2 group by class;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.查询”曾志高翔“教师任课的学生成绩。</span></span><br><span class="line">select teacher.tname,course.cname,student.sname,score.mark</span><br><span class="line">from teacher,course,student,score</span><br><span class="line"><span class="built_in">where</span> teacher.tno=course.tno and course.cno=score.cno and student.sno=score.sno</span><br><span class="line">and teacher.tno=001;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select teacher.tname,course.cname,student.sname,score.mark</span><br><span class="line">from teacher <span class="built_in">join</span> course</span><br><span class="line">on teacher.tno=course.tno</span><br><span class="line"><span class="built_in">join</span> score</span><br><span class="line">on course.cno=score.cno</span><br><span class="line"><span class="built_in">join</span> student</span><br><span class="line">on student.sno=score.sno</span><br><span class="line"><span class="built_in">where</span> teacher.tno=001;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.查询语文课程所有男生的成绩并且查出对应课程的教师名，职称，及所在部门。</span></span><br><span class="line">select course.cname,student.sname,student.ssex,score.mark,teacher.tname,teacher.prof,teacher.depart</span><br><span class="line">from course,student,score,teacher</span><br><span class="line"><span class="built_in">where</span> course.cno=score.cno and score.sno=student.sno and course.tno=teacher.tno</span><br><span class="line">and course.cname=<span class="string">&#x27;语文&#x27;</span> and student.ssex=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select course.cname,student.sname,student.ssex,score.mark,teacher.tname,teacher.prof,teacher.depart</span><br><span class="line">from course <span class="built_in">join</span> score</span><br><span class="line">on course.cno=score.cno</span><br><span class="line"><span class="built_in">join</span> student</span><br><span class="line">on score.sno=student.sno</span><br><span class="line"><span class="built_in">join</span> teacher</span><br><span class="line">on course.tno=teacher.tno</span><br><span class="line"><span class="built_in">where</span> course.cname=<span class="string">&#x27;语文&#x27;</span> and student.ssex=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12.把11题查出的成绩按照降序排序。</span></span><br><span class="line">select course.cname,student.sname,student.ssex,score.mark,teacher.tname,teacher.prof,teacher.depart</span><br><span class="line">from course,student,score,teacher</span><br><span class="line"><span class="built_in">where</span> course.cno=score.cno and score.sno=student.sno and course.tno=teacher.tno</span><br><span class="line">and course.cname=<span class="string">&#x27;语文&#x27;</span> and student.ssex=<span class="string">&#x27;1&#x27;</span> order by mark desc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select course.cname,student.sname,student.ssex,score.mark,teacher.tname,teacher.prof,teacher.depart</span><br><span class="line">from course <span class="built_in">join</span> score</span><br><span class="line">on course.cno=score.cno</span><br><span class="line"><span class="built_in">join</span> student</span><br><span class="line">on score.sno=student.sno</span><br><span class="line"><span class="built_in">join</span> teacher</span><br><span class="line">on course.tno=teacher.tno</span><br><span class="line"><span class="built_in">where</span> course.cname=<span class="string">&#x27;语文&#x27;</span> and student.ssex=<span class="string">&#x27;1&#x27;</span> order by mark desc;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>我有一剑</title>
      <link href="//%5Bobject%20Object%5D/2023/04/02/%E6%88%91%E6%9C%89%E4%B8%80%E5%89%91/"/>
      <url>//%5Bobject%20Object%5D/2023/04/02/%E6%88%91%E6%9C%89%E4%B8%80%E5%89%91/</url>
      
        <content type="html"><![CDATA[<h1 id="剑来"><a href="#剑来" class="headerlink" title="剑来"></a>剑来</h1><p>大千世界，无奇不有。<br>天道崩塌，我，唯有一剑，可搬山，断江，倒海，降妖，镇魔，敕神，摘星，摧城，开天。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MYSQL的三种安装方式</title>
      <link href="//%5Bobject%20Object%5D/2023/04/02/MYSQL%E7%9A%84%E4%B8%89%E7%A7%8D%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F/"/>
      <url>//%5Bobject%20Object%5D/2023/04/02/MYSQL%E7%9A%84%E4%B8%89%E7%A7%8D%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="版本选择"><a href="#版本选择" class="headerlink" title="版本选择"></a>版本选择</h2><p>官网：<a href="https://www.mysql.com/">https://www.mysql.com/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## MySQL5.6：GA 6-12个月，小版本是偶数版</span></span><br><span class="line"><span class="comment">## MySQL5.7：GA 6-12个月，小版本是偶数版，mysql5.7.20以上版本（MGR自带高可用）</span></span><br></pre></td></tr></table></figure><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230328205032652.png" alt="image-20230328205032652"> </p><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230328205052241.png" alt="image-20230328205052241"> </p><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230328205101549.png" alt="image-20230328205101549"> </p><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230328205110735.png" alt="image-20230328205110735"> </p><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><div class="table-container"><table><thead><tr><th>主机名</th><th>IP</th><th>安装方式</th></tr></thead><tbody><tr><td>db01</td><td>10.0.0.51</td><td>yum安装</td></tr><tr><td>db02</td><td>10.0.0.52</td><td>5.6源码</td></tr><tr><td>db03</td><td>10.0.0.53</td><td>5.6二进制</td></tr><tr><td>db04</td><td>10.0.0.54</td><td>5.7二进制</td></tr></tbody></table></div><h2 id="MySQLyum安装"><a href="#MySQLyum安装" class="headerlink" title="MySQLyum安装"></a>MySQLyum安装</h2><ol><li><p>下载MySQL官方源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh https://dev.mysql.com/get/mysql80-community-release-el7-7.noarch.rpm</span><br></pre></td></tr></table></figure></li><li><p>查看仓库中支持哪些MySQL安装包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list|grep mysql</span><br></pre></td></tr></table></figure></li><li><p>修改yum仓库配置文件 // 关闭mysql80仓库 开启mysql57仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@db01,172.16.1.51 <span class="comment">#vim mysql-community.repo</span></span><br><span class="line"></span><br><span class="line">[mysql57-community]</span><br><span class="line">name=MySQL 5.7 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-5.7-</span><br><span class="line">community/el/7/<span class="variable">$basearch</span></span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022</span><br><span class="line">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br><span class="line"></span><br><span class="line">[mysql80-community]</span><br><span class="line">name=MySQL 8.0 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-8.0-</span><br><span class="line">community/el/7/<span class="variable">$basearch</span></span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022</span><br><span class="line">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure></li><li><p>安装MySQL Server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@db01,172.16.1.51:/etc/yum.repos.d <span class="comment"># yum install -y mysql-server</span></span><br></pre></td></tr></table></figure></li><li><p>启动MySQL（自动初始化）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@db01,172.16.1.51:~ <span class="comment"># systemctl start mysqld</span></span><br></pre></td></tr></table></figure></li><li><p>MySQL5.7初始密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@db01,172.16.1.51:~ <span class="comment"># cat /var/log/mysqld.log</span></span><br><span class="line">root@db01,172.16.1.51:~ <span class="comment"># grep &#x27;password&#x27; /var/log/mysqld.log</span></span><br><span class="line">2023-03-28T04:38:20.263481Z 1 [Note] A temporary password is</span><br><span class="line">generated <span class="keyword">for</span> root@localhost: aslDSBoyy2<span class="comment">#y</span></span><br></pre></td></tr></table></figure></li><li><p>连接MySQL(有特殊符号进不去可以加’’号)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -paslDSBoyy2<span class="comment">#y</span></span><br></pre></td></tr></table></figure></li><li><p>第一次登录需要修改密码(第一次修改密码要符合策略)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -uroot -paslDSBoyy2<span class="comment">#y password &#x27;123@dianCOM&#x27;</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230328205711254.png" alt="image-20230328205711254"> </p><h2 id="MySQL5-6-50"><a href="#MySQL5-6-50" class="headerlink" title="MySQL5.6.50"></a>MySQL5.6.50</h2><h3 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h3><p>安装MySQL需要C语言环境<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc glibc gcc-c++ cmake openssl-devel ncurses-devel autoconf</span><br></pre></td></tr></table></figure></p><p>解压源码包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xf mysql-5.6.50.tar.gz</span><br></pre></td></tr></table></figure></p><p>生成<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.6.50 \</span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.6.50/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.6.50/tmp/mysql.sock \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line">-DWITH_SSL=system \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line">-DWITH_DEBUG=0</span><br></pre></td></tr></table></figure></p><p>解析<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定安装目录</span></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.6.50 \</span><br><span class="line"><span class="comment">#数据存放位置</span></span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.6.50/data \</span><br><span class="line"><span class="comment">#socket文件存放位置</span></span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.6.50/tmp/mysql.sock \</span><br><span class="line"><span class="comment">#使用utf8字符集</span></span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line"><span class="comment">#校验规则</span></span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line"><span class="comment">#使用其他额外的字符集</span></span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line"><span class="comment">#支持的存储引擎</span></span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line"><span class="comment">#禁用的存储引擎</span></span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line"><span class="comment">#启用zlib库支持（zib、gzib相关）</span></span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line"><span class="comment">#启用SSL库支持（安全套接层）</span></span><br><span class="line">-DWITH_SSL=bundled \</span><br><span class="line"><span class="comment">#启用本地数据导入支持</span></span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line"><span class="comment">#编译嵌入式服务器支持</span></span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line"><span class="comment"># mysql5.6支持了google的c++mock框架了，允许下载，否则会安装报错。</span></span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line"><span class="comment">#禁用debug（默认为禁用）</span></span><br><span class="line">-DWITH_DEBUG=0</span><br></pre></td></tr></table></figure></p><p>编译&amp;&amp;安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p><p>创建安装目录的软链接(方便更新)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /app/mysql-5.6.50 /app/mysql</span><br></pre></td></tr></table></figure></p><p>编辑并替换配置文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /app/mysql/support-files/my-default.cnf /etc/my.cnf</span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br></pre></td></tr></table></figure></p><p>拷贝启动脚本文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /app/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br></pre></td></tr></table></figure></p><p>创建socket文件存放目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /app/mysql/tmp</span><br></pre></td></tr></table></figure></p><p>创建MySQL程序用户<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@db02,172.16.1.52:/app/mysql/scripts <span class="comment"># useradd mysql -s /sbin/nologin -M</span></span><br></pre></td></tr></table></figure></p><p>进入初始化程序存放目录并初始化<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /app/mysql/scripts &amp;&amp; ./mysql_install_db --user=mysql --</span><br><span class="line">basedir=/app/mysql-5.6.50 --datadir=/app/mysql-5.6.50/data</span><br></pre></td></tr></table></figure></p><p>授权<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R mysql.mysql /app/mysql*</span><br></pre></td></tr></table></figure></p><p>启动服务<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld start</span><br></pre></td></tr></table></figure></p><p>添加环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile.d/mysql.sh</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/app/mysql/bin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure></p><p>允许环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile.d/mysql.sh</span><br></pre></td></tr></table></figure></p><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230330014017042.png" alt="image-20230330014017042"> </p><h3 id="二进制安装"><a href="#二进制安装" class="headerlink" title="二进制安装"></a>二进制安装</h3><p>1.安装依赖<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y autoconf libaio-devel</span><br></pre></td></tr></table></figure></p><p>2.解压mysql二进制包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xf mysql-5.6.50-linux-glibc2.12-x86_64.tar.gz</span><br></pre></td></tr></table></figure></p><p>3.创建安装目录并移动MySQL到安装目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /app &amp;&amp; <span class="built_in">mv</span> mysql-5.6.50-linux-glibc2.12-x86_64 /app/mysql-5.6.50</span><br></pre></td></tr></table></figure></p><p>4.创建安装目录的软链接(方便更新)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /app/mysql-5.6.50 /app/mysql</span><br></pre></td></tr></table></figure></p><p>5.修改配置文件参数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql // 指定程序安装的目录</span><br><span class="line">datadir=/app/mysql/data // 指定程序的数据存放目录</span><br></pre></td></tr></table></figure></p><p>6.拷贝启动脚本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /app/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br></pre></td></tr></table></figure></p><p>7.创建mysql用户<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd mysql -s /sbin/nologin -M</span><br></pre></td></tr></table></figure></p><p>8.初始化<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./mysql_install_db --user=mysql --basedir=/app/mysql --</span><br><span class="line">datadir=/app/mysql/data</span><br></pre></td></tr></table></figure></p><p>9.启动mysql<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld start</span><br></pre></td></tr></table></figure></p><p>10.修改启动脚本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s#/usr/local#/app#g&#x27;</span> /etc/init.d/mysqld</span><br></pre></td></tr></table></figure></p><p>11.启动mysql<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld start</span><br></pre></td></tr></table></figure></p><p>12.添加环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile.d/mysql.sh</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/app/mysql/bin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure></p><p>13.允许环境变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile.d/mysql.sh</span><br></pre></td></tr></table></figure></p><p>14.登陆数据库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br></pre></td></tr></table></figure></p><h2 id="systemd管理mysql"><a href="#systemd管理mysql" class="headerlink" title="systemd管理mysql"></a>systemd管理mysql</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用安装目录下的脚本文件启动</span></span><br><span class="line">/app/mysql-5.6.50/bin/mysqld --basedir=/app/mysql-5.6.50 --</span><br><span class="line">datadir=/app/mysql-5.6.50/data --plugin-dir=/app/mysql-5.6.50/lib/plugin --</span><br><span class="line">user=mysql --log-error=db02.err --pid-file=/app/mysql-5.6.50/data/db02.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># 优化后(使用安装目录下的脚本文件启动)</span></span><br><span class="line">/app/mysql/bin/mysqld --defaults-file=/etc/my.cnf --user=mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑配置文件(将mysql添加到system管理)</span></span><br><span class="line">vim /usr/lib/systemd/system/mysqld.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line"></span><br><span class="line"><span class="comment">## 服务描述</span></span><br><span class="line">After=network.target,syslog.target</span><br><span class="line"></span><br><span class="line"><span class="comment">## 在此服务后启动</span></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/app/mysql/bin/mysqld --defaults-file=/etc/my.cnf --user=mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">## 启动脚本</span></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开机自启</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br></pre></td></tr></table></figure><h2 id="密码相关操作"><a href="#密码相关操作" class="headerlink" title="密码相关操作"></a>密码相关操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更改密码mysql 5.7</span></span><br><span class="line">mysql&gt; alter user root@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;xxxxx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改密码mysql 5.6</span></span><br><span class="line">mysqladmin -uroot -p password <span class="string">&#x27;123&#x27;</span></span><br><span class="line">mysqladmin -uroot -p password <span class="string">&#x27;456&#x27;</span></span><br><span class="line">mysqladmin -uroot -p456 password <span class="string">&#x27;789&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="MySQL5-7-40"><a href="#MySQL5-7-40" class="headerlink" title="MySQL5.7.40"></a>MySQL5.7.40</h2><h3 id="源码安装-1"><a href="#源码安装-1" class="headerlink" title="源码安装"></a>源码安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装MySQL需要C语言环境</span></span><br><span class="line">yum install -y gcc glibc gcc-c++ cmake openssl-devel ncurses-devel autoconf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压源码包</span></span><br><span class="line">tar xf mysql-boost-5.7.40.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在源码包解压目录生成安装文件(自定义安装 nginx:./configure mysql: cmake || gmake)</span></span><br><span class="line"><span class="built_in">cd</span> /root/mysql-5.7.40/</span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.7.40 \</span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.7.40/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.7.40/tmp/mysql.sock \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line">-DWITH_SSL=system \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line">-DWITH_DEBUG=0 \</span><br><span class="line">-DDOWNLOAD_BOOST=1 \</span><br><span class="line">-DWITH_BOOST=/root/mysql-5.7.40/boost/boost_1_59_0</span><br><span class="line"></span><br><span class="line"><span class="comment">## 解析</span></span><br><span class="line"><span class="comment">#指定安装目录</span></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.6.50 \</span><br><span class="line"><span class="comment">#数据存放位置</span></span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.6.50/data \</span><br><span class="line"><span class="comment">#socket文件存放位置</span></span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.6.50/tmp/mysql.sock \</span><br><span class="line"><span class="comment">#使用utf8字符集</span></span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line"><span class="comment">#校验规则</span></span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line"><span class="comment">#使用其他额外的字符集</span></span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line"><span class="comment">#支持的存储引擎</span></span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line"><span class="comment">#禁用的存储引擎</span></span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line"><span class="comment">#启用zlib库支持（zib、gzib相关）</span></span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line"><span class="comment">#启用SSL库支持（安全套接层）</span></span><br><span class="line">-DWITH_SSL=bundled \</span><br><span class="line"><span class="comment">#启用本地数据导入支持</span></span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line"><span class="comment">#编译嵌入式服务器支持</span></span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line"><span class="comment"># mysql5.6支持了google的c++mock框架了，允许下载，否则会安装报错。</span></span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line"><span class="comment">#禁用debug（默认为禁用）</span></span><br><span class="line">-DWITH_DEBUG=0</span><br><span class="line"><span class="comment">#启用下载boost(已下载自动忽略)</span></span><br><span class="line">-DDOWNLOAD_BOOST=1 \</span><br><span class="line"><span class="comment"># 指定本地已有boost目录</span></span><br><span class="line">-DWITH_BOOST=/root/mysql-5.7.40/boost/boost_1_59_0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译&amp;&amp;安装</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建安装目录的软链接(方便更新)</span></span><br><span class="line"><span class="built_in">ln</span> -s /app/mysql-5.7.40 /app/mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑并替换配置文件</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql/support-files/my-default.cnf /etc/my.cnf</span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝启动脚本文件</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建socket文件存放目录</span></span><br><span class="line"><span class="built_in">mkdir</span> /app/mysql/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建MySQL程序用户</span></span><br><span class="line">useradd mysql -s /sbin/nologin -M</span><br><span class="line"><span class="comment"># 授权</span></span><br><span class="line"><span class="built_in">chown</span> -R mysql.mysql /app/mysql*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入初始化程序存放目录并初始化  （-insecure不安全，无密码）</span></span><br><span class="line"><span class="built_in">cd</span> /app/mysql/bin</span><br><span class="line">./mysqld --initialize-insecure --user=mysql --basedir=/app/mysql --datadir=/app/mysql/data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加环境变量</span></span><br><span class="line">vim /etc/profile.d/mysql.sh</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/app/mysql/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许环境变量</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登陆数据库  （-insecure指定后，没有这一步）</span></span><br><span class="line">mysql -uroot -p<span class="string">&#x27;Bcm+FH51Ej3V&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230330014155489.png" alt="image-20230330014155489"> </p><h3 id="二进制安装-1"><a href="#二进制安装-1" class="headerlink" title="二进制安装"></a>二进制安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">yum install -y autoconf libaio-devel cmake</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压mysql二进制包</span></span><br><span class="line">tar xf mysql-5.7.40-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建安装目录并移动MySQL到安装目录</span></span><br><span class="line"><span class="built_in">mkdir</span> /app</span><br><span class="line"><span class="built_in">mv</span> mysql-5.7.40-linux-glibc2.12-x86_64 /app/mysql-5.7.40</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建安装目录的软链接(方便更新)</span></span><br><span class="line"><span class="built_in">ln</span> -s /app/mysql-5.7.40 /app/mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改配置文件参数</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql // 指定程序安装的目录</span><br><span class="line">datadir=/app/mysql/data // 指定程序的数据存放目录</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝启动脚本</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建mysql用户</span></span><br><span class="line">useradd mysql -s /sbin/nologin -M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化（-insecure不安全，无密码）</span></span><br><span class="line">./mysqld --initialize-insecure --user=mysql --basedir=/app/mysql --</span><br><span class="line">datadir=/app/mysql/data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动mysql</span></span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改启动脚本</span></span><br><span class="line">sed -i <span class="string">&#x27;s#/usr/local#/app#g&#x27;</span> /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动mysql</span></span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加环境变量</span></span><br><span class="line">vim /etc/profile.d/mysql.sh</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/app/mysql/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许环境变量</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登陆数据库  （-insecure指定后，没有这一步）</span></span><br><span class="line">mysql -uroot -p<span class="string">&#x27;l%)aPDhA5PCA&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="5-6与5-7安装区别"><a href="#5-6与5-7安装区别" class="headerlink" title="5.6与5.7安装区别"></a>5.6与5.7安装区别</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/application/mysql-5.7.20 \</span><br><span class="line">-DMYSQL_DATADIR=/application/mysql-5.7.20/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/application/mysql-5.7.20/tmp/mysql.sock \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line">-DWITH_SSL=bundled \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line">-DWITH_DEBUG=0 \</span><br><span class="line">-DDOWNLOAD_BOOST=1 \</span><br><span class="line">-DWITH_BOOST=/usr/local/boost_1_59_0</span><br><span class="line"></span><br><span class="line"><span class="comment">## 二进制</span></span><br><span class="line">root@db03,172.16.1.53:~ <span class="comment"># tar xf mysql-5.7.40-linux-glibc2.12-</span></span><br><span class="line">x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">root@db03,172.16.1.53:~ <span class="comment"># mv mysql-5.7.40-linux-glibc2.12-x86_64</span></span><br><span class="line">/app/mysql-5.7.40</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 初始化</span></span><br><span class="line">./mysqld --initialize --user=mysql --basedir=/app/mysql-5.7.40 --datadir=/app/mysql-5.7.40/data</span><br><span class="line"></span><br><span class="line">./mysqld --initialize-insecure --user=mysql --basedir=/app/mysql-5.7.40 --datadir=/app/mysql-5.7.40/data</span><br></pre></td></tr></table></figure><p><img src="https://demo-immg.oss-cn-shanghai.aliyuncs.com/note/image-20230330192248152.png" alt="image-20230330192248152"> </p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第一篇文章</title>
      <link href="//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="这日风和日丽的一天！"><a href="#这日风和日丽的一天！" class="headerlink" title="这日风和日丽的一天！"></a>这日风和日丽的一天！</h2>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第三篇文章</title>
      <link href="//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E4%B8%89%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E4%B8%89%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="我的第三篇文章"><a href="#我的第三篇文章" class="headerlink" title="我的第三篇文章!"></a>我的第三篇文章!</h2>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第二篇文章</title>
      <link href="//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E4%BA%8C%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E4%BA%8C%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="我的第二篇文章"><a href="#我的第二篇文章" class="headerlink" title="我的第二篇文章!"></a>我的第二篇文章!</h2>]]></content>
      
      
      <categories>
          
          <category> xxx </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第四篇文章</title>
      <link href="//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E5%9B%9B%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>//%5Bobject%20Object%5D/2023/03/29/2023-3-29-%E7%AC%AC%E5%9B%9B%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="我的第四篇文章"><a href="#我的第四篇文章" class="headerlink" title="我的第四篇文章!"></a>我的第四篇文章!</h2>]]></content>
      
      
      <categories>
          
          <category> medo </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>关于</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/progress_bar.css"/>
      <url>/css/progress_bar.css</url>
      
        <content type="html"><![CDATA[/* 博客加载条 */.pace {    -webkit-pointer-events: none;    pointer-events: none;    -webkit-user-select: none;    -moz-user-select: none;    user-select: none;    z-index: 2000;    position: fixed;    margin: auto;    top: 4px;    left: 0;    right: 0;    height: 8px;    border-radius: 8px;    width: 7rem;    background: #eaecf2;    border: 1px #e3e8f7;    overflow: hidden}.pace-inactive .pace-progress {    opacity: 0;    transition: .3s ease-in}.pace .pace-progress {    -webkit-box-sizing: border-box;    -moz-box-sizing: border-box;    -ms-box-sizing: border-box;    -o-box-sizing: border-box;    box-sizing: border-box;    -webkit-transform: translate3d(0, 0, 0);    -moz-transform: translate3d(0, 0, 0);    -ms-transform: translate3d(0, 0, 0);    -o-transform: translate3d(0, 0, 0);    transform: translate3d(0, 0, 0);    max-width: 200px;    position: absolute;    z-index: 2000;    display: block;    top: 0;    right: 100%;    height: 100%;    width: 100%;    /* linear-gradient(to right, #3494e6, #ec6ead) */    background: linear-gradient(to right, #43cea2, #3866ca);    animation: gradient 2s ease infinite;    background-size: 200%}.pace.pace-inactive {    opacity: 0;    transition: .3s;    top: -8px}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* 页面透明 *//* 页脚与头图透明 */#footer {    background: transparent !important;  }#page-header {    background: transparent !important;  }    /* 白天模式遮罩透明#footer::before {    background: transparent !important;  }#page-header::before {    background: transparent !important;  }    /* 夜间模式遮罩透明 */[data-theme="dark"] #footer::before {    background: transparent !important;  }[data-theme="dark"] #page-header::before {    background: transparent !important;  }div#post {    /* 最后一个值为透明度可以自己指定 */    background: rgba(255,255,255,.3);    /* 透明模糊亚克力 */    backdrop-filter: var(--backdrop-filter);  }/* 翻页按钮居中 */#pagination {    width: 100%;    margin: auto;}/* 魔改导航栏 *//* 一级菜单居中 */#nav .menus_items {    position: absolute !important;    width: fit-content !important;    left: 50% !important;    transform: translateX(-50%) !important;}/* 子菜单横向展示 */#nav .menus_items .menus_item:hover .menus_item_child {    display: flex !important;}/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */.menus_items .menus_item:nth-child(5) .menus_item_child {    left: -38px;}/* 黑夜霓虹灯 *//* 日间模式不生效 */[data-theme="light"] #site-name,[data-theme="light"] #site-title,[data-theme="light"] #site-subtitle,[data-theme="light"] #post-info {  animation: none;}/* 夜间模式生效 */[data-theme="dark"] #site-name,[data-theme="dark"] #site-title {  animation: light_15px 10s linear infinite;}[data-theme="dark"] #site-subtitle {  animation: light_10px 10s linear infinite;}[data-theme="dark"] #post-info {  animation: light_5px 10s linear infinite;}/* 关键帧描述 */@keyframes light_15px {  0% {    text-shadow: #5636ed 0 0 15px;  }  12.5% {    text-shadow: #11ee5e 0 0 15px;  }  25% {    text-shadow: #f14747 0 0 15px;  }  37.5% {    text-shadow: #f1a247 0 0 15px;  }  50% {    text-shadow: #f1ee47 0 0 15px;  }  50% {    text-shadow: #b347f1 0 0 15px;  }  62.5% {    text-shadow: #002afa 0 0 15px;  }  75% {    text-shadow: #ed709b 0 0 15px;  }  87.5% {    text-shadow: #39c5bb 0 0 15px;  }  100% {    text-shadow: #5636ed 0 0 15px;  }}@keyframes light_10px {  0% {    text-shadow: #5636ed 0 0 10px;  }  12.5% {    text-shadow: #11ee5e 0 0 10px;  }  25% {    text-shadow: #f14747 0 0 10px;  }  37.5% {    text-shadow: #f1a247 0 0 10px;  }  50% {    text-shadow: #f1ee47 0 0 10px;  }  50% {    text-shadow: #b347f1 0 0 10px;  }  62.5% {    text-shadow: #002afa 0 0 10px;  }  75% {    text-shadow: #ed709b 0 0 10px;  }  87.5% {    text-shadow: #39c5bb 0 0 10px;  }  100% {    text-shadow: #5636ed 0 0 10px;  }}@keyframes light_5px {  0% {    text-shadow: #5636ed 0 0 5px;  }  12.5% {    text-shadow: #11ee5e 0 0 5px;  }  25% {    text-shadow: #f14747 0 0 5px;  }  37.5% {    text-shadow: #f1a247 0 0 15px;  }  50% {    text-shadow: #f1ee47 0 0 5px;  }  50% {    text-shadow: #b347f1 0 0 5px;  }  62.5% {    text-shadow: #002afa 0 0 5px;  }  75% {    text-shadow: #ed709b 0 0 5px;  }  87.5% {    text-shadow: #39c5bb 0 0 5px;  }  100% {    text-shadow: #5636ed 0 0 5px;  }}/* 侧边栏个人信息卡片动态渐变色 */#aside-content > .card-widget.card-info {    background: linear-gradient(      -45deg,      #e8d8b9,      #eccec5,      #a3e9eb,      #bdbdf0,      #eec1ea    );    box-shadow: 0 0 5px rgb(66, 68, 68);    position: relative;    background-size: 400% 400%;    -webkit-animation: Gradient 10s ease infinite;    -moz-animation: Gradient 10s ease infinite;    animation: Gradient 10s ease infinite !important;  }  @-webkit-keyframes Gradient {    0% {      background-position: 0% 50%;    }    50% {      background-position: 100% 50%;    }    100% {      background-position: 0% 50%;    }  }  @-moz-keyframes Gradient {    0% {      background-position: 0% 50%;    }    50% {      background-position: 100% 50%;    }    100% {      background-position: 0% 50%;    }  }  @keyframes Gradient {    0% {      background-position: 0% 50%;    }    50% {      background-position: 100% 50%;    }    100% {      background-position: 0% 50%;    }  }  /* 个人卡片渐变 */  /* 黑夜模式适配 */[data-theme="dark"] #aside-content > .card-widget.card-info {    background: #191919ee;  }    /* 个人信息Follow me按钮 */#aside-content > .card-widget.card-info > #card-info-btn {    background-color: #3eb8be;    border-radius: 8px;  }/* 鼠标样式 */#cursor {  position: fixed;  width: 16px;  height: 16px;  /* 这里改变跟随的底色 */  background: rgb(57, 197, 187);  border-radius: 8px;  opacity: 0.25;  z-index: 10086;  pointer-events: none;  transition: 0.2s ease-in-out;  transition-property: background, opacity, transform;}#cursor.hidden {  opacity: 0;}#cursor.hover {  opacity: 0.1;  transform: scale(2.5);  -webkit-transform: scale(2.5);  -moz-transform: scale(2.5);  -ms-transform: scale(2.5);  -o-transform: scale(2.5);}#cursor.active {  opacity: 0.5;  transform: scale(0.5);  -webkit-transform: scale(0.5);  -moz-transform: scale(0.5);  -ms-transform: scale(0.5);  -o-transform: scale(0.5);}/* 页面样式-抹角等 */:root {  --trans-light: rgba(255, 255, 255, 0.88);  --trans-dark: rgba(25, 25, 25, 0.66);  --border-style: 1px solid rgb(169, 169, 169);  --backdrop-filter: blur(5px) saturate(150%);}/* 首页文章卡片 */#recent-posts > .recent-post-item {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 25px;  border: var(--border-style);}/* 首页侧栏卡片 */#aside-content .card-widget {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border-radius: 18px;  border: var(--border-style);}/* 文章页、归档页、普通页面 */div#post,div#page,div#archive {  background: var(--trans-light);  backdrop-filter: var(--backdrop-filter);  border: var(--border-style);  border-radius: 20px;}/* 导航栏 */#page-header.nav-fixed #nav {  background: rgba(255, 255, 255, 0.75);  backdrop-filter: var(--backdrop-filter);}[data-theme="dark"] #page-header.nav-fixed #nav {  background: rgba(0, 0, 0, 0.7) !important;}/* 夜间模式遮罩 */[data-theme="dark"] #recent-posts > .recent-post-item,[data-theme="dark"] #aside-content .card-widget,[data-theme="dark"] div#post,[data-theme="dark"] div#archive,[data-theme="dark"] div#page {  background: var(--trans-dark);}/* 夜间模式页脚页头遮罩透明 */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* 阅读模式 */.read-mode #aside-content .card-widget {  background: rgba(158, 204, 171, 0.5) !important;}.read-mode div#post {  background: rgba(158, 204, 171, 0.5) !important;}/* 夜间模式下的阅读模式 */[data-theme="dark"] .read-mode #aside-content .card-widget {  background: rgba(34, 34, 34, 0.9) !important;  color: #ffffff;}[data-theme="dark"] .read-mode div#post {  background: rgba(32, 32, 32, 0.9) !important;  color: #ffffff;}/* 风车转动 *//* 文章页H1-H6图标样式效果 *//* 控制风车转动速度 4s那里可以自己调节快慢 */h1::before,h2::before,h3::before,h4::before,h5::before,h6::before {  -webkit-animation: ccc 4s linear infinite;  animation: ccc 4s linear infinite;}/* 控制风车转动方向 -1turn 为逆时针转动，1turn 为顺时针转动，相同数字部分记得统一修改 */@-webkit-keyframes ccc {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  to {    -webkit-transform: rotate(-1turn);    transform: rotate(-1turn);  }}@keyframes ccc {  0% {    -webkit-transform: rotate(0deg);    transform: rotate(0deg);  }  to {    -webkit-transform: rotate(-1turn);    transform: rotate(-1turn);  }}/* 设置风车颜色 */#content-inner.layout h1::before {  color: #ef50a8;  margin-left: -1.55rem;  font-size: 1.3rem;  margin-top: -0.23rem;}#content-inner.layout h2::before {  color: #fb7061;  margin-left: -1.35rem;  font-size: 1.1rem;  margin-top: -0.12rem;}#content-inner.layout h3::before {  color: #ffbf00;  margin-left: -1.22rem;  font-size: 0.95rem;  margin-top: -0.09rem;}#content-inner.layout h4::before {  color: #a9e000;  margin-left: -1.05rem;  font-size: 0.8rem;  margin-top: -0.09rem;}#content-inner.layout h5::before {  color: #57c850;  margin-left: -0.9rem;  font-size: 0.7rem;  margin-top: 0rem;}#content-inner.layout h6::before {  color: #5ec1e0;  margin-left: -0.9rem;  font-size: 0.66rem;  margin-top: 0rem;}/* s设置风车hover动效 6s那里可以自己调节快慢*/#content-inner.layout h1:hover,#content-inner.layout h2:hover,#content-inner.layout h3:hover,#content-inner.layout h4:hover,#content-inner.layout h5:hover,#content-inner.layout h6:hover {  color: var(--theme-color);}#content-inner.layout h1:hover::before,#content-inner.layout h2:hover::before,#content-inner.layout h3:hover::before,#content-inner.layout h4:hover::before,#content-inner.layout h5:hover::before,#content-inner.layout h6:hover::before {  color: var(--theme-color);  -webkit-animation: ccc 6s linear infinite;  animation: ccc 6s linear infinite;}/* 右边定位挂件 */body::-webkit-scrollbar {  width: 0;}.neko {  width: 64px;  height: 64px;  background-image: url("https://bu.dusays.com/2022/07/20/62d812db74be9.png");  position: absolute;  right: 32px;  background-repeat: no-repeat;  background-size: contain;  transform: translateX(50%);  cursor: pointer;  font-family: tzy;  font-weight: 600;  font-size: 16px;  color: #6f42c1;  display: none;}.neko::after {  display: none;  width: 100px;  height: 100px;  background-image: url("https://bu.dusays.com/2022/07/20/62d812d95e6f5.png");  background-size: contain;  z-index: 9999;  position: absolute;  right: 50%;  text-align: center;  line-height: 100px;  top: -115%;}.neko.showMsg::after {  content: attr(data-msg);  display: block;  overflow: hidden;  text-overflow: ellipsis;}.neko:hover::after {  content: attr(data-msg);  display: block;  overflow: hidden;  text-overflow: ellipsis;}.neko.fontColor::after {  color: #333;}/*** @description: 滚动条样式  跟猫二选一*/@media screen and (max-width:992px) {  ::-webkit-scrollbar {      width: 8px !important;      height: 8px !important  }  ::-webkit-scrollbar-track {      border-radius: 2em;  }  ::-webkit-scrollbar-thumb {      background-color: rgb(255 255 255 / .3);      background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent);      border-radius: 2em  }  ::-webkit-scrollbar-corner {      background-color: transparent  }}/* 右键菜单 */#rightMenu {  display: none;  position: fixed;  width: 160px;  height: fit-content;  top: 10%;  left: 10%;    /* 菜单面板背景色 */  background-color: var(--card-bg);    /* 菜单面板文字颜色 */  border: 1px solid var(--font-color);  border-radius: 8px;  z-index: 100;}#rightMenu .rightMenu-group {  padding: 7px 6px;}#rightMenu .rightMenu-group:not(:nth-last-child(1)) {  border-bottom: 1px solid var(--font-color);}#rightMenu .rightMenu-group.rightMenu-small {  display: flex;  justify-content: space-between;}#rightMenu .rightMenu-group .rightMenu-item {  height: 30px;  line-height: 30px;  border-radius: 8px;  transition: 0.3s;  color: var(--font-color);}#rightMenu .rightMenu-group.rightMenu-line .rightMenu-item {  display: flex;  height: 40px;  line-height: 40px;  padding: 0 4px;}#rightMenu .rightMenu-group .rightMenu-item:hover {    /* 鼠标悬浮选项颜色 */  background-color: var(--text-bg-hover);}#rightMenu .rightMenu-group .rightMenu-item i {  display: inline-block;  text-align: center;  line-height: 30px;  width: 30px;  height: 30px;  padding: 0 5px;}#rightMenu .rightMenu-group .rightMenu-item span {  line-height: 30px;}#rightMenu .rightMenu-group.rightMenu-line .rightMenu-item * {  height: 40px;  line-height: 40px;}.rightMenu-group.hide {  display: none;}/* 全局宽度 */.layout {  max-width: 1400px;}/* 侧边卡片栏宽度 */.aside-content {  max-width: 318px;  min-width: 300px;}/* 平板尺寸自适应(不启用侧边栏宽度限制) */@media screen and (max-width: 900px) {  .aside-content {    max-width: none !important;    padding: 0 5px 0 5px;  }}/* 除了首页以外其他页面隐藏卡片，并采用宽屏显示 */#archive,#page,#category,#tag {  width: 100%;}.page:not(.page.home) .aside-content {  display: none;}/* tzy页脚样式 */#ft {  max-width: 1200px;  margin: 0 auto 12px;  display: flex;  color: rgb(255 255 255 / 80%) !important;  text-align: left;  flex-wrap: wrap;}.ft-item-1,.ft-item-2 {  display: flex;  height: 100%;  padding: 2px 14px;}.ft-item-1 {  flex-direction: column;  flex: 2;}.ft-item-2 {  flex: 1;  flex-direction: column;}.t-top {  display: flex;}.t-top .t-t-l {  display: flex;  flex-direction: column;  flex: 1.4;  margin-right: 10px;}.t-top .t-t-l .bg-ad {  width: 85%;  border-radius: 10px;  padding: 0 10px;}.btn-xz-box {  margin-top: 10px;}/* 按钮背景颜色等 */.btn-xz {  display: block;  background-color: var(--btn-bg);  color: var(--btn-color);  text-align: center;  line-height: 2.4;  margin: 8px 0;}.btn-xz:hover {  text-decoration: none !important;}/* 按钮悬浮颜色 */.btn-xz-box:hover .btn-xz {  background-color: var(--text-bg-hover);}.t-top .t-t-r {  display: flex;  flex-direction: column;  flex: 1;}.ft-links {  padding: 0 14px;  list-style: none;  margin-top: 0 !important;}.ft-links li a {  display: inline-block !important;  width: 50%;}/* 链接悬浮颜色 */.ft-links li a:hover {  text-decoration: none !important;  color: var(--theme-color) !important;}.ft-item-2 .ft-img-group {  width: 100%;}.ft-t {  font-size: 1.1rem;  margin-bottom: 20px;  line-height: 1;  font-weight: 600;}.t-l-t {  padding-left: 14px;}.ft-item-2 .ft-img-group .img-group-item {  display: inline-block;  width: 18.4%;  margin-right: 14px;  margin-bottom: 6px;}.ft-item-2 .ft-img-group .img-group-item a {  display: inline-block;  width: 100%;  height: 100%;}.ft-item-2 .ft-img-group .img-group-item a img {  width: 100%;  max-height: 80px;  border-radius: 10px;}/* 头像悬浮颜色框 */.ft-item-2 .ft-img-group .img-group-item a img:hover {  border: 2px solid var(--theme-color);}@media screen and (max-width: 768px) {  .ft-item-1 {    flex-basis: 100% !important;  }  .ft-item-2 {    flex-basis: 100% !important;  }  .t-top .t-t-l .bg-ad {    width: 100%;  }}@media screen and (max-width: 576px) {  .t-top {    flex-wrap: wrap;  }  .t-top .t-t-l {    flex-basis: 100% !important;  }  .t-top .t-t-r {    margin-top: 16px;    flex-basis: 100% !important;  }}#footer-wrap a {  border-radius: 30px;}#footer-wrap {  padding: 20px 20px;}/* 页脚心跳动画 */#heartbeat {  color: red;  animation: iconAnimate 1s ease-in-out infinite;}@-moz-keyframes iconAnimate {  0%,  100% {    transform: scale(1);  }  10%,  30% {    transform: scale(0.9);  }  20%,  40%,  60%,  80% {    transform: scale(1.1);  }  50%,  70% {    transform: scale(1.1);  }}@-webkit-keyframes iconAnimate {  0%,  100% {    transform: scale(1);  }  10%,  30% {    transform: scale(0.9);  }  20%,  40%,  60%,  80% {    transform: scale(1.1);  }  50%,  70% {    transform: scale(1.1);  }}@-o-keyframes iconAnimate {  0%,  100% {    transform: scale(1);  }  10%,  30% {    transform: scale(0.9);  }  20%,  40%,  60%,  80% {    transform: scale(1.1);  }  50%,  70% {    transform: scale(1.1);  }}@keyframes iconAnimate {  0%,  100% {    transform: scale(1);  }  10%,  30% {    transform: scale(0.9);  }  20%,  40%,  60%,  80% {    transform: scale(1.1);  }  50%,  70% {    transform: scale(1.1);  }}/* 帧率检测 */#fps {  position: fixed;  /* 指定位置 */  left: 10px;  bottom: 10px;  z-index: 1919810;}[data-theme="light"] #fps {  background-color: rgba(255, 255, 255, 0.85);  backdrop-filter: var(--backdrop-filter);  padding: 4px;  border-radius: 4px;}[data-theme="dark"] #fps {  background-color: rgba(0, 0, 0, 0.72);  backdrop-filter: var(--backdrop-filter);  padding: 4px;  border-radius: 4px;}/* 头像呼吸灯 */[data-theme="light"] .avatar-img {  animation: huxi_light 4s ease-in-out infinite;}[data-theme="dark"] .avatar-img {  animation: huxi_dark 4s ease-in-out infinite;}@keyframes huxi_light {  0% {    box-shadow: 0px 0px 1px 1px #d83868;  }  50% {    box-shadow: 0px 0px 5px 5px #7626b8;  }  100% {    box-shadow: 0px 0px 1px 1px #15bd69;  }}@keyframes huxi_dark {  0% {    box-shadow: 0px 0px 1px 1px #3ed320;  }  50% {    box-shadow: 0px 0px 5px 5px #39c5bb;  }  100% {    box-shadow: 0px 0px 1px 1px #3ee614;  }}/* 波浪css */.main-hero-waves-area {  width: 100%;  position: absolute;  left: 0;  bottom: -11px;  z-index: 5;}.waves-area .waves-svg {  width: 100%;  height: 5rem;}/* Animation */.parallax > use {  animation: move-forever 25s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;}.parallax > use:nth-child(1) {  animation-delay: -2s;  animation-duration: 7s;  fill: #f7f9febd;}.parallax > use:nth-child(2) {  animation-delay: -3s;  animation-duration: 10s;  fill: #f7f9fe82;}.parallax > use:nth-child(3) {  animation-delay: -4s;  animation-duration: 13s;  fill: #f7f9fe36;}.parallax > use:nth-child(4) {  animation-delay: -5s;  animation-duration: 20s;  fill: #f7f9fe;}/* 黑色模式背景 */[data-theme="dark"] .parallax > use:nth-child(1) {  animation-delay: -2s;  animation-duration: 7s;  fill: #18171dc8;}[data-theme="dark"] .parallax > use:nth-child(2) {  animation-delay: -3s;  animation-duration: 10s;  fill: #18171d80;}[data-theme="dark"] .parallax > use:nth-child(3) {  animation-delay: -4s;  animation-duration: 13s;  fill: #18171d3e;}[data-theme="dark"] .parallax > use:nth-child(4) {  animation-delay: -5s;  animation-duration: 20s;  fill: #18171d;}@keyframes move-forever {  0% {    transform: translate3d(-90px, 0, 0);  }  100% {    transform: translate3d(85px, 0, 0);  }}/*Shrinking for mobile*/@media (max-width: 768px) {  .waves-area .waves-svg {    height: 40px;    min-height: 40px;  }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/font.css"/>
      <url>/css/font.css</url>
      
        <content type="html"><![CDATA[@font-face {    /* 为载入的字体取名字(随意) */    font-family: 'Consola';    /* 字体文件地址(相对或者绝对路径都可以) */    src: url(/font/consola.ttf);    /* 定义加粗样式(加粗多少) */    font-weight: normal;    /* 定义字体样式(斜体/非斜体) */    font-style: normal;    /* 定义显示样式 */    font-display: block;  }@font-face {    /* 为载入的字体取名字(随意) */    font-family: 'TTBZ';    /* 字体文件地址(相对或者绝对路径都可以) */    src: url(/font/ttboz.ttf);    /* 定义加粗样式(加粗多少) */    font-weight: normal;    /* 定义字体样式(斜体/非斜体) */    font-style: normal;    /* 定义显示样式 */    font-display: block;  }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/readPercent.css"/>
      <url>/css/readPercent.css</url>
      
        <content type="html"><![CDATA[/* 返回顶部 */button#go-up #percent {    display: none;    font-weight: bold;    font-size: 15px !important;}button#go-up span {    font-size: 12px!important;    margin-right: -1px;}/* 鼠标滑动到按钮上时显示返回顶部图标 */button#go-up:hover i {    display: block !important;}button#go-up:hover #percent {    display: none !important;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/universe.css"/>
      <url>/css/universe.css</url>
      
        <content type="html"><![CDATA[/* 背景宇宙星光  */#universe{    display: block;    position: fixed;    margin: 0;    padding: 0;    border: 0;    outline: 0;    left: 0;    top: 0;    width: 100%;    height: 100%;    pointer-events: none;    /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */    z-index: -1;  }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/cat.js"/>
      <url>/js/cat.js</url>
      
        <content type="html"><![CDATA[/* 定位挂件 */if (document.body.clientWidth > 992) {    function getBasicInfo() {        /* 窗口高度 */        var ViewH = $(window).height();        /* document高度 */        var DocH = $("body")[0].scrollHeight;        /* 滚动的高度 */        var ScrollTop = $(window).scrollTop();        /* 可滚动的高度 */        var S_V = DocH - ViewH;        var Band_H = ScrollTop / (DocH - ViewH) * 100;        return {            ViewH: ViewH,            DocH: DocH,            ScrollTop: ScrollTop,            Band_H: Band_H,            S_V: S_V        }    };    function show(basicInfo) {        if (basicInfo.ScrollTop > 0.001) {            $(".neko").css('display', 'block');        } else {            $(".neko").css('display', 'none');        }    }    (function ($) {        $.fn.nekoScroll = function (option) {            var defaultSetting = {                top: '0',                scroWidth: 6 + 'px',                z_index: 9999,                zoom: 0.9,                borderRadius: 5 + 'px',                right: 60 + 'px',                // 这里可以换为你喜欢的图片，例如我就换为了雪人，但是要抠图                nekoImg: "https://bu.dusays.com/2022/07/20/62d812db74be9.png",                hoverMsg: "喵喵喵~",                color: "#6f42c1",                during: 500,                blog_body: "body",            };            var setting = $.extend(defaultSetting, option);            var getThis = this.prop("className") !== "" ? "." + this.prop("className") : this.prop("id") !== "" ? "#" +                this.prop("id") : this.prop("nodeName");            if ($(".neko").length == 0) {                this.after("<div class=\"neko\" id=" + setting.nekoname + " data-msg=\"" + setting.hoverMsg + "\"></div>");            }            let basicInfo = getBasicInfo();            $(getThis)                .css({                    'position': 'fixed',                    'width': setting.scroWidth,                    'top': setting.top,                    'height': basicInfo.Band_H * setting.zoom * basicInfo.ViewH * 0.01 + 'px',                    'z-index': setting.z_index,                    'background-color': setting.bgcolor,                    "border-radius": setting.borderRadius,                    'right': setting.right,                    'background-image': 'url(' + setting.scImg + ')',                    'background-image': '-webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent)', 'border-radius': '2em',                    'background-size': 'contain'                });            $("#" + setting.nekoname)                .css({                    'position': 'fixed',                    'top': basicInfo.Band_H * setting.zoom * basicInfo.ViewH * 0.01 - 50 + 'px',                    'z-index': setting.z_index * 10,                    'right': setting.right,                    'background-image': 'url(' + setting.nekoImg + ')',                });            show(getBasicInfo());            $(window)                .scroll(function () {                    let basicInfo = getBasicInfo();                    show(basicInfo);                    $(getThis)                        .css({                            'position': 'fixed',                            'width': setting.scroWidth,                            'top': setting.top,                            'height': basicInfo.Band_H * setting.zoom * basicInfo.ViewH * 0.01 + 'px',                            'z-index': setting.z_index,                            'background-color': setting.bgcolor,                            "border-radius": setting.borderRadius,                            'right': setting.right,                            'background-image': 'url(' + setting.scImg + ')',                            'background-image': '-webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.1) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 75%, transparent)', 'border-radius': '2em',                            'background-size': 'contain'                        });                    $("#" + setting.nekoname)                        .css({                            'position': 'fixed',                            'top': basicInfo.Band_H * setting.zoom * basicInfo.ViewH * 0.01 - 50 + 'px',                            'z-index': setting.z_index * 10,                            'right': setting.right,                            'background-image': 'url(' + setting.nekoImg + ')',                        });                    if (basicInfo.ScrollTop == basicInfo.S_V) {                        $("#" + setting.nekoname)                            .addClass("showMsg")                    } else {                        $("#" + setting.nekoname)                            .removeClass("showMsg");                        $("#" + setting.nekoname)                            .attr("data-msg", setting.hoverMsg);                    }                });            this.click(function (e) {                btf.scrollToDest(0, 500)            });            $("#" + setting.nekoname)                .click(function () {                    btf.scrollToDest(0, 500)                });            return this;        }    })(jQuery);    $(document).ready(function () {        //部分自定义        $("#myscoll").nekoScroll({            bgcolor: 'rgb(0 0 0 / .5)', //背景颜色，没有绳子背景图片时有效            borderRadius: '2em',            zoom: 0.9        }        );        //自定义（去掉以下注释，并注释掉其他的查看效果）        /*        $("#myscoll").nekoScroll({            nekoname:'neko1', //nekoname，相当于id            nekoImg:'img/猫咪.png', //neko的背景图片            scImg:"img/绳1.png", //绳子的背景图片            bgcolor:'#1e90ff', //背景颜色，没有绳子背景图片时有效            zoom:0.9, //绳子长度的缩放值            hoverMsg:'你好~喵', //鼠标浮动到neko上方的对话框信息            right:'100px', //距离页面右边的距离            fontFamily:'楷体', //对话框字体            fontSize:'14px', //对话框字体的大小            color:'#1e90ff', //对话框字体颜色            scroWidth:'8px', //绳子的宽度            z_index:100, //不用解释了吧            during:1200, //从顶部到底部滑动的时长        });        */    })}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/cursor.js"/>
      <url>/js/cursor.js</url>
      
        <content type="html"><![CDATA[/* 听话鼠标 */var CURSOR;Math.lerp = (a, b, n) => (1 - n) * a + n * b;const getStyle = (el, attr) => {    try {        return window.getComputedStyle            ? window.getComputedStyle(el)[attr]            : el.currentStyle[attr];    } catch (e) {}    return "";};class Cursor {    constructor() {        this.pos = {curr: null, prev: null};        this.pt = [];        this.create();        this.init();        this.render();    }    move(left, top) {        this.cursor.style["left"] = `${left}px`;        this.cursor.style["top"] = `${top}px`;    }    create() {        if (!this.cursor) {            this.cursor = document.createElement("div");            this.cursor.id = "cursor";            this.cursor.classList.add("hidden");            document.body.append(this.cursor);        }        var el = document.getElementsByTagName('*');        for (let i = 0; i < el.length; i++)            if (getStyle(el[i], "cursor") == "pointer")                this.pt.push(el[i].outerHTML);        document.body.appendChild((this.scr = document.createElement("style")));        // 这里改变鼠标指针的颜色 由svg生成        this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='rgb(57, 197, 187)'/></svg>") 4 4, auto}`;    }    refresh() {        this.scr.remove();        this.cursor.classList.remove("hover");        this.cursor.classList.remove("active");        this.pos = {curr: null, prev: null};        this.pt = [];        this.create();        this.init();        this.render();    }    init() {        document.onmouseover  = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.add("hover");        document.onmouseout   = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.remove("hover");        document.onmousemove  = e => {(this.pos.curr == null) && this.move(e.clientX - 8, e.clientY - 8); this.pos.curr = {x: e.clientX - 8, y: e.clientY - 8}; this.cursor.classList.remove("hidden");};        document.onmouseenter = e => this.cursor.classList.remove("hidden");        document.onmouseleave = e => this.cursor.classList.add("hidden");        document.onmousedown  = e => this.cursor.classList.add("active");        document.onmouseup    = e => this.cursor.classList.remove("active");    }    render() {        if (this.pos.prev) {            this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, 0.15);            this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, 0.15);            this.move(this.pos.prev.x, this.pos.prev.y);        } else {            this.pos.prev = this.pos.curr;        }        requestAnimationFrame(() => this.render());    }}(() => {    CURSOR = new Cursor();    // 需要重新获取列表时，使用 CURSOR.refresh()})();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/fps.js"/>
      <url>/js/fps.js</url>
      
        <content type="html"><![CDATA[if (window.localStorage.getItem("fpson") == undefined || window.localStorage.getItem("fpson") == "1") {    var rAF = function () {        return (            window.requestAnimationFrame ||            window.webkitRequestAnimationFrame ||            function (callback) {                window.setTimeout(callback, 1000 / 60);            }        );    }();    var frame = 0;    var allFrameCount = 0;    var lastTime = Date.now();    var lastFameTime = Date.now();    var loop = function () {        var now = Date.now();        var fs = (now - lastFameTime);        var fps = Math.round(1000 / fs);        lastFameTime = now;        // 不置 0，在动画的开头及结尾记录此值的差值算出 FPS        allFrameCount++;        frame++;        if (now > 1000 + lastTime) {            var fps = Math.round((frame * 1000) / (now - lastTime));            if (fps <= 5) {                var kd = `<span style="color:#bd0000">卡成ppt🤢</span>`            } else if (fps <= 15) {                var kd = `<span style="color:red">电竞级帧率😖</span>`            } else if (fps <= 25) {                var kd = `<span style="color:orange">有点难受😨</span>`            } else if (fps < 35) {                var kd = `<span style="color:#9338e6">不太流畅🙄</span>`            } else if (fps <= 45) {                var kd = `<span style="color:#08b7e4">还不错哦😁</span>`            } else {                var kd = `<span style="color:#39c5bb">十分流畅🤣</span>`            }            document.getElementById("fps").innerHTML = `FPS:${fps} ${kd}`;            frame = 0;            lastTime = now;        };        rAF(loop);    }    loop();} else {    document.getElementById("fps").style = "display:none!important"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/readPercent.js"/>
      <url>/js/readPercent.js</url>
      
        <content type="html"><![CDATA[window.onscroll = percent;// 执行函数// 页面百分比function percent() {    let a = document.documentElement.scrollTop || window.pageYOffset, // 卷去高度        b = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight) - document.documentElement.clientHeight, // 整个网页高度        result = Math.round(a / b * 100), // 计算百分比        up = document.querySelector("#go-up") // 获取按钮    if (result <= 95) {        up.childNodes[0].style.display = 'none'        up.childNodes[1].style.display = 'block'        up.childNodes[1].innerHTML = result;    } else {        up.childNodes[1].style.display = 'none'        up.childNodes[0].style.display = 'block'    }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime.js"/>
      <url>/js/runtime.js</url>
      
        <content type="html"><![CDATA[var now = new Date();function createtime() {  // 当前时间  now.setTime(now.getTime() + 1000);  var start = new Date("08/01/2022 00:00:00"); // 旅行者1号开始计算的时间  var dis = Math.trunc(23400000000 + ((now - start) / 1000) * 17); // 距离=秒数*速度 记住转换毫秒  var unit = (dis / 149600000).toFixed(6);  // 天文单位  var grt = new Date("03/26/2023 00:00:00");// 网站诞生时间  var days = (now - grt) / 1e3 / 60 / 60 / 24,    dnum = Math.floor(days),    hours = (now - grt) / 1e3 / 60 / 60 - 24 * dnum,    hnum = Math.floor(hours);  1 == String(hnum).length && (hnum = "0" + hnum);  var minutes = (now - grt) / 1e3 / 60 - 1440 * dnum - 60 * hnum,    mnum = Math.floor(minutes);  1 == String(mnum).length && (mnum = "0" + mnum);  var seconds = (now - grt) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,    snum = Math.round(seconds);  1 == String(snum).length && (snum = "0" + snum);  let currentTimeHtml = "";  (currentTimeHtml =    hnum < 18 && hnum >= 9    ? `<img class='boardsign' src='https://demo-immg.oss-cn-shanghai.aliyuncs.com/blog/yejiaodaima/Fwu.svg' title='什么时候能够实现财富自由呀~'><br> <div style="font-size:13px;font-weight:bold">本站居然运行了 ${dnum} 天 ${hnum} 小时 ${mnum} 分 ${snum} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${dis} 千米，约为 ${unit} 个天文单位 🚀</div>`    : `<img class='boardsign' src='https://demo-immg.oss-cn-shanghai.aliyuncs.com/blog/yejiaodaima/Fxiao.svg' title='下班了就该开开心心地玩耍~'><br> <div style="font-size:13px;font-weight:bold">本站居然运行了 ${dnum} 天 ${hnum} 小时 ${mnum} 分 ${snum} 秒 <i id="heartbeat" class='fas fa-heartbeat'></i> <br> 旅行者 1 号当前距离地球 ${dis} 千米，约为 ${unit} 个天文单位 🚀</div>`),    document.getElementById("workboard") &&    (document.getElementById("workboard").innerHTML = currentTimeHtml);}// 设置重复执行函数，周期1000mssetInterval(() => {  createtime();}, 1000);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/rightmenu.js"/>
      <url>/js/rightmenu.js</url>
      
        <content type="html"><![CDATA[function setMask() {    //设置遮罩    if (document.getElementsByClassName("rmMask")[0] != undefined)        return document.getElementsByClassName("rmMask")[0];    mask = document.createElement('div');    mask.className = "rmMask";    mask.style.width = window.innerWidth + 'px';    mask.style.height = window.innerHeight + 'px';    mask.style.background = '#fff';    mask.style.opacity = '.0';    mask.style.position = 'fixed';    mask.style.top = '0';    mask.style.left = '0';    mask.style.zIndex = 998;    document.body.appendChild(mask);    document.getElementById("rightMenu").style.zIndex = 19198;    return mask;}function insertAtCursor(myField, myValue) {    //IE 浏览器    if (document.selection) {        myField.focus();        sel = document.selection.createRange();        sel.text = myValue;        sel.select();    }    //FireFox、Chrome等    else if (myField.selectionStart || myField.selectionStart == '0') {        var startPos = myField.selectionStart;        var endPos = myField.selectionEnd;        // 保存滚动条        var restoreTop = myField.scrollTop;        myField.value = myField.value.substring(0, startPos) + myValue + myField.value.substring(endPos, myField.value.length);        if (restoreTop > 0) {            myField.scrollTop = restoreTop;        }        myField.focus();        myField.selectionStart = startPos + myValue.length;        myField.selectionEnd = startPos + myValue.length;    } else {        myField.value += myValue;        myField.focus();    }}let rmf = {};rmf.showRightMenu = function (isTrue, x = 0, y = 0) {    let $rightMenu = $('#rightMenu');    $rightMenu.css('top', x + 'px').css('left', y + 'px');    if (isTrue) {        $rightMenu.show();    } else {        $rightMenu.hide();    }}rmf.copyWordsLink = function () {    let url = window.location.href    let txa = document.createElement("textarea");    txa.value = url;    document.body.appendChild(txa)    txa.select();    document.execCommand("Copy");    document.body.removeChild(txa);}rmf.switchReadMode = function () {    const $body = document.body    $body.classList.add('read-mode')    const newEle = document.createElement('button')    newEle.type = 'button'    newEle.className = 'fas fa-sign-out-alt exit-readmode'    $body.appendChild(newEle)    function clickFn() {        $body.classList.remove('read-mode')        newEle.remove()        newEle.removeEventListener('click', clickFn)    }    newEle.addEventListener('click', clickFn)}//复制选中文字rmf.copySelect = function () {    document.execCommand('Copy', false, null);}//回到顶部rmf.scrollToTop = function () {    document.getElementsByClassName("menus_items")[1].setAttribute("style", "");    document.getElementById("name-container").setAttribute("style", "display:none");    btf.scrollToDest(0, 500);}document.body.addEventListener('touchmove', function () {}, { passive: false });function popupMenu() {    window.oncontextmenu = function (event) {        // if (event.ctrlKey) return true;        // 当关掉自定义右键时候直接返回        if (mouseMode == "off") return true;        $('.rightMenu-group.hide').hide();        if (document.getSelection().toString()) {            $('#menu-text').show();        }        if (document.getElementById('post')) {            $('#menu-post').show();        } else {            if (document.getElementById('page')) {                $('#menu-post').show();            }        }        var el = window.document.body;        el = event.target;        var a = /^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/        if (a.test(window.getSelection().toString()) && el.tagName != "A") {            $('#menu-too').show()        }        if (el.tagName == 'A') {            $('#menu-to').show()            rmf.open = function () {                if (el.href.indexOf("http://") == -1 && el.href.indexOf("https://") == -1 || el.href.indexOf("yisous.xyz") != -1) {                    pjax.loadUrl(el.href)                }                else {                    location.href = el.href                }            }            rmf.openWithNewTab = function () {                window.open(el.href);                // window.location.reload();            }            rmf.copyLink = function () {                let url = el.href                let txa = document.createElement("textarea");                txa.value = url;                document.body.appendChild(txa)                txa.select();                document.execCommand("Copy");                document.body.removeChild(txa);            }        } else if (el.tagName == 'IMG') {            $('#menu-img').show()            rmf.openWithNewTab = function () {                window.open(el.src);                // window.location.reload();            }            rmf.click = function () {                el.click()            }            rmf.copyLink = function () {                let url = el.src                let txa = document.createElement("textarea");                txa.value = url;                document.body.appendChild(txa)                txa.select();                document.execCommand("Copy");                document.body.removeChild(txa);            }            rmf.saveAs = function () {                var a = document.createElement('a');                var url = el.src;                var filename = url.split("/")[-1];                a.href = url;                a.download = filename;                a.click();                window.URL.revokeObjectURL(url);            }        } else if (el.tagName == "TEXTAREA" || el.tagName == "INPUT") {            $('#menu-paste').show();            rmf.paste = function () {                navigator.permissions                    .query({                        name: 'clipboard-read'                    })                    .then(result => {                        if (result.state == 'granted' || result.state == 'prompt') {                            //读取剪贴板                            navigator.clipboard.readText().then(text => {                                console.log(text)                                insertAtCursor(el, text)                            })                        } else {                            Snackbar.show({                                text: '请允许读取剪贴板！',                                pos: 'top-center',                                showAction: false,                            })                        }                    })            }        }        let pageX = event.clientX + 10;        let pageY = event.clientY;        let rmWidth = $('#rightMenu').width();        let rmHeight = $('#rightMenu').height();        if (pageX + rmWidth > window.innerWidth) {            pageX -= rmWidth + 10;        }        if (pageY + rmHeight > window.innerHeight) {            pageY -= pageY + rmHeight - window.innerHeight;        }        mask = setMask();        // 滚动消失的代码和阅读进度有冲突，因此放到readPercent.js里面了        $(".rightMenu-item").click(() => {            $('.rmMask').attr('style', 'display: none');        })        $(window).resize(() => {            rmf.showRightMenu(false);            $('.rmMask').attr('style', 'display: none');        })        mask.onclick = () => {            $('.rmMask').attr('style', 'display: none');        }        rmf.showRightMenu(true, pageY, pageX);        $('.rmMask').attr('style', 'display: flex');        return false;    };    window.addEventListener('click', function () {        rmf.showRightMenu(false);    });}if (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {    popupMenu()}const box = document.documentElementfunction addLongtabListener(target, callback) {    let timer = 0 // 初始化timer    target.ontouchstart = () => {        timer = 0 // 重置timer        timer = setTimeout(() => {            callback();            timer = 0        }, 380) // 超时器能成功执行，说明是长按    }    target.ontouchmove = () => {        clearTimeout(timer) // 如果来到这里，说明是滑动        timer = 0    }    target.ontouchend = () => { // 到这里如果timer有值，说明此触摸时间不足380ms，是点击        if (timer) {            clearTimeout(timer)        }    }}addLongtabListener(box, popupMenu)// 全屏rmf.fullScreen = function () {    if (document.fullscreenElement) document.exitFullscreen();    else document.documentElement.requestFullscreen();}// 右键开关if (localStorage.getItem("mouse") == undefined) {    localStorage.setItem("mouse", "on");}var mouseMode = localStorage.getItem("mouse");function changeMouseMode() {    if (localStorage.getItem("mouse") == "on") {        mouseMode = "off";        localStorage.setItem("mouse", "off");        debounce(function () {            new Vue({                data: function () {                    this.$notify({                        title: "切换右键模式成功🍔",                        message: "当前鼠标右键已恢复为系统默认！",                        position: 'top-left',                        offset: 50,                        showClose: true,                        type: "success",                        duration: 5000                    });                }            })        }, 300);    } else {        mouseMode = "on";        localStorage.setItem("mouse", "on");        debounce(function () {            new Vue({                data: function () {                    this.$notify({                        title: "切换右键模式成功🍔",                        message: "当前鼠标右键已更换为网站指定样式！",                        position: 'top-left',                        offset: 50,                        showClose: true,                        type: "success",                        duration: 5000                    });                }            })        }, 300);    }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/shuijiwen.js"/>
      <url>/js/shuijiwen.js</url>
      
        <content type="html"><![CDATA[// 发现有时会和当前页面重复，加一个判断function randomPost() {    fetch('/baidusitemap.xml').then(res => res.text()).then(str => (new window.DOMParser()).parseFromString(str, "text/xml")).then(data => {        let ls = data.querySelectorAll('url loc');        while (true) {            let url = ls[Math.floor(Math.random() * ls.length)].innerHTML;            if (location.href == url) continue;            location.href = url;            return;        }    })}// 阅读文章时看了一遍写的代码，发现加个数组和一个遍历完全没必要，改成下面这个即可。// function randomPost() {//     fetch('/baidusitemap.xml').then(res => res.text()).then(str => (new window.DOMParser()).parseFromString(str, "text/xml")).then(data => {//         let ls = data.querySelectorAll('url loc');//         location.href = ls[Math.floor(Math.random() * ls.length)].innerHTML//     })// }// 旧代码// function randomPost() {    // fetch('/baidusitemap.xml').then(res => res.text()).then(str => (new window.DOMParser()).parseFromString(str, "text/xml")).then(data => {    //     let ls = data.querySelectorAll('url loc');    //     let list = [];    //     ls.forEach(i => list.push(i.innerHTML))    //     location.href = list[Math.floor(Math.random() * ls.length)]    // })// }]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/sun_moon.js"/>
      <url>/js/sun_moon.js</url>
      
        <content type="html"><![CDATA[function switchNightMode() {    document.querySelector('body').insertAdjacentHTML('beforeend', '<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"><div id="sun"></div><div id="moon"></div></div></div>'),        setTimeout(function () {            document.querySelector('body').classList.contains('DarkMode') ? (document.querySelector('body').classList.remove('DarkMode'), localStorage.setItem('isDark', '0'), document.getElementById('modeicon').setAttribute('xlink:href', '#icon-moon')) : (document.querySelector('body').classList.add('DarkMode'), localStorage.setItem('isDark', '1'), document.getElementById('modeicon').setAttribute('xlink:href', '#icon-sun')),                setTimeout(function () {                    document.getElementsByClassName('Cuteen_DarkSky')[0].style.transition = 'opacity 3s';                    document.getElementsByClassName('Cuteen_DarkSky')[0].style.opacity = '0';                    setTimeout(function () {                        document.getElementsByClassName('Cuteen_DarkSky')[0].remove();                    }, 1e3);                }, 2e3)        })    const nowMode = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'    if (nowMode === 'light') {        // 先设置太阳月亮透明度        document.getElementById("sun").style.opacity = "1";        document.getElementById("moon").style.opacity = "0";        setTimeout(function () {            document.getElementById("sun").style.opacity = "0";            document.getElementById("moon").style.opacity = "1";        }, 1000);        activateDarkMode()        saveToLocal.set('theme', 'dark', 2)        // GLOBAL_CONFIG.Snackbar !== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)        document.getElementById('modeicon').setAttribute('xlink:href', '#icon-sun')        // 延时弹窗提醒        setTimeout(() => {            new Vue({                data: function () {                    this.$notify({                        title: "关灯啦🌙",                        message: "当前已成功切换至夜间模式！",                        position: 'top-left',                        offset: 50,                        showClose: true,                        type: "success",                        duration: 5000                    });                }            })        }, 2000)    } else {        // 先设置太阳月亮透明度        document.getElementById("sun").style.opacity = "0";        document.getElementById("moon").style.opacity = "1";        setTimeout(function () {            document.getElementById("sun").style.opacity = "1";            document.getElementById("moon").style.opacity = "0";        }, 1000);                activateLightMode()        saveToLocal.set('theme', 'light', 2)        document.querySelector('body').classList.add('DarkMode'), document.getElementById('modeicon').setAttribute('xlink:href', '#icon-moon')        setTimeout(() => {            new Vue({                data: function () {                    this.$notify({                        title: "开灯啦🌞",                        message: "当前已成功切换至白天模式！",                        position: 'top-left',                        offset: 50,                        showClose: true,                        type: "success",                        duration: 5000                    });                }            })        }, 2000)    }    // handle some cases    typeof utterancesTheme === 'function' && utterancesTheme()    typeof FB === 'object' && window.loadFBComment()    window.DISQUS && document.getElementById('disqus_thread').children.length && setTimeout(() => window.disqusReset(), 200)}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/title.js"/>
      <url>/js/title.js</url>
      
        <content type="html"><![CDATA[//动态标题var OriginTitile = document.title;var titleTime;document.addEventListener('visibilitychange', function () {  if (document.hidden) {    //离开当前页面时标签显示内容    document.title = '👀快来看美人出浴图~';    clearTimeout(titleTime);  } else {    //返回当前页面时标签显示内容    document.title = '🐖魔法师的博客～';    //两秒后变回正常标题    titleTime = setTimeout(function () {      document.title = OriginTitile;    }, 2000);  }});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/universe.js"/>
      <url>/js/universe.js</url>
      
        <content type="html"><![CDATA[function dark() {window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var n,e,i,h,t=.05,s=document.getElementById("universe"),o=!0,a="180,184,240",r="226,225,142",d="226,225,224",c=[];function f(){n=window.innerWidth,e=window.innerHeight,i=.216*n,s.setAttribute("width",n),s.setAttribute("height",e)}function u(){h.clearRect(0,0,n,e);for(var t=c.length,i=0;i<t;i++){var s=c[i];s.move(),s.fadeIn(),s.fadeOut(),s.draw()}}function y(){this.reset=function(){this.giant=m(3),this.comet=!this.giant&&!o&&m(10),this.x=l(0,n-10),this.y=l(0,e),this.r=l(1.1,2.6),this.dx=l(t,6*t)+(this.comet+1-1)*t*l(50,120)+2*t,this.dy=-l(t,6*t)-(this.comet+1-1)*t*l(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=l(.2,1-.4*(this.comet+1-1)),this.do=l(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>n||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(h.beginPath(),this.giant)h.fillStyle="rgba("+a+","+this.opacity+")",h.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){h.fillStyle="rgba("+d+","+this.opacity+")",h.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var t=0;t<30;t++)h.fillStyle="rgba("+d+","+(this.opacity-this.opacity/20*t)+")",h.rect(this.x-this.dx/4*t,this.y-this.dy/4*t-2,2,2),h.fill()}else h.fillStyle="rgba("+r+","+this.opacity+")",h.rect(this.x,this.y,this.r,this.r);h.closePath(),h.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>n-n/4||this.y<0)&&(this.fadingOut=!0)},setTimeout(function(){o=!1},50)}function m(t){return Math.floor(1e3*Math.random())+1<10*t}function l(t,i){return Math.random()*(i-t)+t}f(),window.addEventListener("resize",f,!1),function(){h=s.getContext("2d");for(var t=0;t<i;t++)c[t]=new y,c[t].reset();u()}(),function t(){document.getElementsByTagName('html')[0].getAttribute('data-theme')=='dark'&&u(),window.requestAnimationFrame(t)}()};dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>电影</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友链</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
